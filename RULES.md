# 프로젝트 작업 규칙 (PROJECT RULES)

이 파일은 모든 작업 시 반드시 준수해야 하는 규칙입니다.
어떤 작업을 하든, 코드를 수정하든, 새 기능을 추가하든 이 규칙을 항상 따라주세요.

---

## 🚨 필수 안전 규칙 (모든 작업 시 반드시 준수)

### 1. 작업 전 체크 (Before)
- 수정/추가하려는 부분이 기존에 저장된 기능, 구조, 설정에 영향을 주는지 **먼저 확인한 후** 작업 시작
- 관련된 파일, 컴포넌트, API, DB 스키마를 먼저 파악
- 영향 범위를 예측하고, 영향받는 부분을 미리 메모

### 2. 작업 중 체크 (During)
- 코드 변경 시 관련된 다른 컴포넌트, API, DB 스키마, 스타일이 깨지지 않는지 **확인하면서** 진행
- 하나의 파일을 수정하면, 그 파일을 import/사용하는 다른 파일도 확인
- DB 스키마 변경 시 관련된 모든 쿼리와 API가 정상 작동하는지 확인

### 3. 작업 후 체크 (After)
- 하나의 작업이 완료되면, 해당 작업으로 인해 기존 전체 시스템(기능, 구조, 설정, UI)에 오류/에러/변형이 발생하지 않았는지 **반드시 전체 점검**
- 관련된 페이지들을 확인하여 정상 작동 여부 검증
- 콘솔 에러, 타입 에러, 런타임 에러가 없는지 확인

### 4. 기존 기능 보존 (절대 규칙)
- **새로운 기능 추가나 수정으로 인해 기존에 정상 작동하던 기능이 망가지는 일이 절대 없어야 함**
- 기존 코드를 삭제하거나 대폭 변경할 때는 특히 주의
- 확실하지 않으면 기존 코드를 주석 처리하고 새 코드를 추가하는 방식으로 안전하게 진행

---

## 📝 작업 언어 규칙 (한국어)

- 모든 작업 상황 보고, 작업 결과, 진행 설명, 에러 메시지 설명 등을 **한글(한국어)**로 작성
- 코드 주석도 가능하면 한글로 작성
- 커밋 메시지, 콘솔 로그 설명 등도 한글로 작성
- 작업 완료 후 변경 사항 요약도 한글로 작성

---

## 🔒 가격 체계 규칙 (핵심 비즈니스 규칙)

### 회원 등급별 차등 가격
- 모든 가격은 회원 등급(Start/Driving/Top)에 따라 다름
- 가격 기준: `current_products` 테이블의 등급별 공급가 (10원 단위)
- 가격 흐름: 상품등록(1원 단위) → 차주 예상공급가(10원 올림) → 현재 공급가(운영 기준)

### 가격 확정 시점
- 가격 확정 = **배송중으로 전환되는 시점**
- 대기~배송준비중: 가격 항상 표시하되 미확정 상태 (current_products 현재 가격 참조)
- 배송중 전환 시: 그 시점의 current_products 등급별 공급가로 확정·잠금
- **배송중 이후 가격 절대 변경 금지** (상품 가격이 나중에 바뀌어도 기존 배송중 주문 영향 없음)

---

## 🕐 시간대 규칙

- 모든 날짜/시간 계산은 **한국 시간(KST, UTC+9)** 기준
- DB가 UTC로 저장하는 경우 반드시 KST 보정 적용
