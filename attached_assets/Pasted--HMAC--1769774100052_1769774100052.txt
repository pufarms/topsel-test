====================================
ğŸ”§ ê¸´ê¸‰ ìˆ˜ì •: HMAC ì„œëª… ìƒì„± ì˜¤ë¥˜ í•´ê²°
====================================

ğŸ“ íŒŒì¼: server/services/solapi.ts

ğŸ¯ ìˆ˜ì • ìœ„ì¹˜: getTemplateDetail() ë©”ì„œë“œ

ğŸ”§ ìˆ˜ì • ë‚´ìš©:

ê¸°ì¡´ ì½”ë“œì—ì„œ HMAC ì„œëª… ìƒì„± ë¶€ë¶„ì„ ì•„ë˜ë¡œ **êµì²´**:

```typescript
async getTemplateDetail(templateId: string) {
  try {
    console.log('ğŸ” [Solapi] í…œí”Œë¦¿ ìƒì„¸ ì¡°íšŒ ì‹œì‘:', templateId);

    // URL ì¸ì½”ë”©
    const encodedId = encodeURIComponent(templateId);
    const url = `https://api.solapi.com/kakao/v2/templates/${encodedId}`;

    // HMAC ì¸ì¦ í—¤ë” ìƒì„± (ìˆ˜ì •ë¨)
    const date = new Date().toISOString();
    const salt = crypto.randomBytes(16).toString('hex'); // 32ë°”ì´íŠ¸ë¡œ ë³€ê²½
    
    // ì„œëª… ìƒì„±: dateì™€ saltë¥¼ ê³µë°± ì—†ì´ ì—°ê²°
    const data = date + salt;
    const signature = crypto
      .createHmac('sha256', this.apiSecret)
      .update(data)
      .digest('hex');

    const authHeader = `HMAC-SHA256 apiKey=${this.apiKey}, date=${date}, salt=${salt}, signature=${signature}`;

    console.log('ğŸš€ [Solapi] REST API í˜¸ì¶œ:', url);
    console.log('ğŸ”‘ [Solapi] ì¸ì¦ ì •ë³´:', {
      apiKey: this.apiKey,
      date,
      saltLength: salt.length,
      signatureLength: signature.length
    });

    // REST API í˜¸ì¶œ
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Authorization': authHeader,
        'Content-Type': 'application/json'
      }
    });

    console.log('ğŸ“¡ [Solapi] ì‘ë‹µ ìƒíƒœ:', response.status);

    if (!response.ok) {
      const errorText = await response.text();
      console.error('âŒ [Solapi] API ì˜¤ë¥˜:', {
        status: response.status,
        statusText: response.statusText,
        body: errorText
      });

      return {
        success: false,
        error: {
          status: response.status,
          message: response.statusText,
          details: errorText
        }
      };
    }

    const data = await response.json();
    console.log('âœ… [Solapi] í…œí”Œë¦¿ ì¡°íšŒ ì„±ê³µ:', data.name);

    return {
      success: true,
      data
    };

  } catch (error: any) {
    console.error('âŒ [Solapi] getTemplateDetail ì˜ˆì™¸:', error);
    return {
      success: false,
      error: {
        status: 500,
        message: error.message || 'í…œí”Œë¦¿ ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ ë°œìƒ',
        details: error.stack
      }
    };
  }
}
