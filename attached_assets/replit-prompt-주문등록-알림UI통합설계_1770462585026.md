⚠️ 모든 작업 보고와 설명을 반드시 한글(한국어)로 작성하세요. 영어 사용 금지.

# 작업 지시서: 주문 등록 알림 UI 통합 설계

## 📋 작업 개요

회원 주문 등록 시 여러 단계의 검증(등급, 상품, 주소, 잔액 등)이 이루어지고 있습니다.
기존 검증 알림과 새로 추가된 정산(잔액) 알림이 회원에게 **혼란 없이, 단계별로 명확하게** 표시되도록 UI를 통합 설계합니다.

**핵심 원칙: 한 번에 하나의 문제만 보여준다. 가장 먼저 해결해야 할 문제부터 순서대로.**

---

## 🎯 알림 표시 대원칙

### 원칙 1: 단계별 차단 (앞 단계 통과 → 다음 단계 검증)

회원이 보게 되는 알림은 **가장 먼저 걸린 문제 하나만** 표시합니다.
여러 문제가 동시에 있어도, 앞 단계 문제부터 해결하도록 유도합니다.

```
[검증 순서 - 앞에서 걸리면 뒤는 실행 안 됨]

① 등급 문제 → "등급을 올려야 합니다" (여기서 차단)
② 파일/양식 문제 → "파일을 확인해주세요" (여기서 차단)
③ 상품/데이터 문제 → "상품 오류를 확인해주세요" (오류건 표시)
④ 잔액 문제 → "잔액이 부족합니다" (여기서 차단)
⑤ 주소 문제 → "주소를 확인해주세요" (오류건 표시)
⑥ 성공 → "주문이 등록되었습니다"
```

### 원칙 2: 알림 유형을 3가지로 통일

| 알림 유형 | 사용 시점 | UI 형태 |
|-----------|----------|---------|
| **🔴 차단 알림** | 진행 자체가 불가할 때 (등급, 잔액 부족) | 다이얼로그 (모달) |
| **🟡 확인 알림** | 일부 오류가 있지만 선택 가능할 때 (상품 오류, 중복 파일) | 다이얼로그 + 버튼 선택 |
| **🟢 완료 알림** | 작업 성공 시 | 토스트 (자동 사라짐) |

### 원칙 3: 잔액 정보는 "항상 보이는 배너"로 분리

잔액 관련 정보는 알림창이 아니라 **주문 등록 화면 상단에 항상 보이는 배너**로 표시합니다.
이렇게 하면 회원이 주문 전에 미리 잔액을 확인할 수 있어, 업로드 후 잔액 부족으로 차단되는 상황을 줄일 수 있습니다.

---

## 📱 화면별 상세 설계

---

### 화면 1: 주문 등록 화면 (엑셀 업로드 전)

```
┌─────────────────────────────────────────────────────────────┐
│ 📦 주문 등록                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─── 💰 잔액 현황 ──────────────────────────────────────┐  │
│  │                                                       │  │
│  │  예치금: 100,000원  ·  포인터: 30,000원                │  │
│  │  진행 중 주문: 50,000원                                │  │
│  │  ─────────────────────────────────                    │  │
│  │  사용 가능 잔액: 80,000원                    [충전하기] │  │
│  │                                                       │  │
│  └───────────────────────────────────────────────────────┘  │
│                                                             │
│  [주문등록양식 다운]     [엑셀 주문 등록]                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**잔액 배너 디자인 규칙:**

| 상태 | 배너 색상 | 표시 내용 |
|------|----------|----------|
| 잔액 충분 (10만원 이상) | 연한 파란색 배경 | 기본 잔액 정보 |
| 잔액 적음 (5만원 미만) | 연한 주황색 배경 | 잔액 정보 + "잔액이 적습니다" 안내 문구 |
| 잔액 없음 (0원) | 연한 빨간색 배경 | 잔액 정보 + "예치금 충전 후 주문 가능합니다" 안내 문구 |

**중요: 이 배너는 알림이 아닙니다. 화면의 고정 요소로 항상 보입니다.**

---

### 화면 2: 엑셀 업로드 후 - 검증 결과 표시

엑셀을 업로드하면 서버에서 순차적으로 검증이 진행됩니다.
검증 결과에 따라 **하나의 다이얼로그**가 표시됩니다 (여러 개가 연달아 뜨지 않음).

---

#### 케이스 A: 상품/데이터 오류만 있는 경우 (잔액은 충분)

**기존과 동일한 처리 - 변경 없음**

```
┌─────────────────────────────────────────────────┐
│  ⚠️  일부 주문에 오류가 있습니다                    │
│                                                 │
│  전체: 25건 / 정상: 22건 / 오류: 3건              │
│                                                 │
│  오류 목록:                                      │
│  ├ 3행: ABC001 - 현재 공급되지 않는 상품입니다      │
│  ├ 7행: 수령자 주소 누락                          │
│  └ 12행: DEF002 - 공급중지된 상품입니다            │
│                                                 │
│  [정상건만 등록 (22건)]          [취소]            │
└─────────────────────────────────────────────────┘
```

---

#### 케이스 B: 잔액 부족만 있는 경우 (상품 오류 없음)

**새로 추가되는 다이얼로그**

```
┌─────────────────────────────────────────────────┐
│  🔴 잔액 부족으로 주문을 등록할 수 없습니다         │
│                                                 │
│  ┌─ 주문 내역 ─────────────────────────────┐    │
│  │  업로드 건수: 25건                        │    │
│  │  주문 총액: 350,000원                     │    │
│  └──────────────────────────────────────────┘    │
│                                                 │
│  ┌─ 잔액 현황 ─────────────────────────────┐    │
│  │  예치금         100,000원                 │    │
│  │  포인터          30,000원                 │    │
│  │  진행 중 주문    -50,000원                │    │
│  │  ───────────────────────                 │    │
│  │  사용 가능       80,000원                 │    │
│  │  부족 금액      270,000원  ← 빨간색 강조   │    │
│  └──────────────────────────────────────────┘    │
│                                                 │
│  예치금을 충전한 후 다시 주문해 주세요.              │
│                                                 │
│  [예치금 충전하기]                   [닫기]        │
└─────────────────────────────────────────────────┘
```

---

#### 케이스 C: 상품 오류 + 잔액 부족 둘 다 있는 경우

**핵심: 하나의 다이얼로그에 두 문제를 함께 보여주되, 영역을 명확히 분리**

```
┌─────────────────────────────────────────────────┐
│  🔴 주문을 등록할 수 없습니다                       │
│                                                 │
│  2가지 문제가 확인되었습니다.                        │
│                                                 │
│  ┌─ ① 상품 오류 (3건) ────────────────────┐     │
│  │  3행: ABC001 - 공급되지 않는 상품         │     │
│  │  7행: 수령자 주소 누락                    │     │
│  │  12행: DEF002 - 공급중지 상품             │     │
│  └──────────────────────────────────────────┘     │
│                                                 │
│  ┌─ ② 잔액 부족 ──────────────────────────┐     │
│  │  정상건 주문 총액   350,000원             │     │
│  │  사용 가능 잔액      80,000원             │     │
│  │  부족 금액          270,000원  ← 빨간색   │     │
│  └──────────────────────────────────────────┘     │
│                                                 │
│  상품 오류를 수정하고, 예치금을 충전한 후             │
│  다시 주문해 주세요.                               │
│                                                 │
│  [예치금 충전하기]                   [닫기]        │
└─────────────────────────────────────────────────┘
```

**케이스 C 처리 규칙:**
- 상품 오류와 잔액 부족이 동시에 발생하면, "정상건만 등록" 버튼을 표시하지 않음
- 이유: 정상건만 등록하더라도 잔액이 부족하기 때문
- 두 문제를 모두 해결해야 등록 가능하다는 것을 안내

---

#### 케이스 D: 상품 오류 있음 + 정상건은 잔액 내 등록 가능

**기존 흐름 유지하되, 잔액 정보를 추가 표시**

```
┌─────────────────────────────────────────────────┐
│  ⚠️  일부 주문에 오류가 있습니다                    │
│                                                 │
│  전체: 25건 / 정상: 22건 / 오류: 3건              │
│                                                 │
│  오류 목록:                                      │
│  ├ 3행: ABC001 - 현재 공급되지 않는 상품입니다      │
│  ├ 7행: 수령자 주소 누락                          │
│  └ 12행: DEF002 - 공급중지된 상품입니다            │
│                                                 │
│  ┌─ 잔액 확인 ✅ ──────────────────────────┐    │
│  │  정상건 주문 총액: 280,000원               │    │
│  │  사용 가능 잔액: 350,000원 → 등록 가능     │    │
│  └──────────────────────────────────────────┘    │
│                                                 │
│  [정상건만 등록 (22건)]          [취소]            │
└─────────────────────────────────────────────────┘
```

---

#### 케이스 E: 중복 파일 감지 (기존 유지)

**변경 없음 - 기존 처리 그대로 유지**

```
이전 업로드 정보 표시 → "계속 진행" / "취소" 선택
```

---

#### 케이스 F: 전체 성공 (기존 유지)

**변경 없음**

```
🟢 토스트: "주문 등록 완료 - 25건의 주문이 등록되었습니다."
```

---

#### 케이스 G: 일부 성공 + 오류건 (기존 유지 + 잔액 정보 추가)

**기존 토스트에 정산 정보 한 줄 추가**

```
🟢 토스트: "주문 등록 완료 - 22건 등록, 3건 오류 (오류건 다운로드됨)"
         "정산 예정: 280,000원 (잔액: 70,000원)"
```

---

### 화면 3: 개별 주문 등록 시

개별 주문(1건) 등록 시 잔액 부족이면 **토스트 알림**으로 간단하게 표시:

```
🔴 토스트 알림:
   잔액 부족 - 주문 등록 불가
   주문 금액: 15,000원 / 사용 가능 잔액: 8,000원
   부족 금액: 7,000원
   예치금을 충전 후 다시 시도해주세요.
```

---

## 📊 전체 검증 흐름도 (최종)

```
[회원이 엑셀 업로드 클릭]
         │
         ▼
  ① 등급 체크 ──── 실패 → 🔴 토스트 "스타트 등급 이상만 가능"
         │ 통과
         ▼
  ② 파일 체크 ──── 실패 → 🔴 토스트 "파일을 확인해주세요"
         │ 통과
         ▼
  ③ 중복 파일 ──── 감지 → 🟡 다이얼로그 "이전 업로드 있음" [계속/취소]
         │ 통과
         ▼
  ④ 행별 검증 (필수필드, 상품존재, 공급중지)
         │
         ▼
  ⑤ 잔액 검증 (정상건 총액 vs 사용 가능 잔액)
         │
         ▼
  ⑥ 주소 검증
         │
         ▼
  [결과 조합에 따라 다이얼로그 표시]
         │
    ┌────┼────┬────────────┬──────────────┐
    │    │    │            │              │
  오류0  오류有  오류有        오류0          오류有
  잔액OK 잔액OK  잔액부족      잔액부족        잔액부족
    │    │    │            │              │
  케이스F 케이스A/D 케이스C    케이스B        케이스C
  (성공) (선택가능) (둘다차단)  (잔액차단)    (둘다차단)
```

---

## 🎨 다이얼로그 디자인 통일 규칙

모든 다이얼로그가 기존 UI와 통일되도록 아래 규칙을 적용합니다:

### 색상 체계
| 상태 | 아이콘 | 제목 색상 | 강조 색상 |
|------|-------|----------|----------|
| 차단 (진행 불가) | 🔴 | 빨간색 | 부족 금액 빨간색 |
| 경고 (선택 가능) | ⚠️ | 주황색 | 오류 건수 주황색 |
| 성공 | ✅ | 초록색 | - |

### 다이얼로그 크기
- 간단한 알림: 작은 다이얼로그 (최대 너비 400px)
- 상세 정보 포함: 중간 다이얼로그 (최대 너비 500px)
- 오류 목록 + 잔액 정보: 큰 다이얼로그 (최대 너비 560px)

### 버튼 배치
- **차단 다이얼로그**: [예치금 충전하기(강조)] + [닫기(보조)]
- **선택 다이얼로그**: [정상건만 등록(강조)] + [취소(보조)]
- **차단+오류 복합**: [예치금 충전하기(강조)] + [닫기(보조)] (정상건 등록 버튼 없음)

### 정보 영역 스타일
- 주문 내역, 잔액 현황 등 정보 블록은 **연한 회색 배경의 둥근 박스**로 감싸기
- 기존 검증 오류 목록과 동일한 스타일 사용
- 숫자는 **오른쪽 정렬**, 금액은 **천 단위 콤마** 적용

---

## 🚨 필수 안전 규칙

1. **기존 검증 알림 절대 변경 금지**: 등급 체크, 상품 검증, 중복 파일, 주소 검증의 기존 알림은 그대로 유지
2. **알림 순서 변경 금지**: 기존 ①~⑪ 검증 순서를 바꾸지 마세요. 잔액 검증은 ⑩-1 위치에 유지
3. **기존 "정상건만 등록" 로직 유지**: 잔액이 충분할 때의 "정상건만 등록" 기능은 기존과 동일하게 유지
4. **한 번에 하나의 다이얼로그만**: 여러 다이얼로그가 연달아 뜨거나 겹치지 않도록 처리

## 📝 작업 언어 규칙

- 모든 작업 상황 보고, 결과, 설명을 한글(한국어)로 작성하세요

---

## ✅ 완료 기준

- [ ] 주문 등록 화면 상단에 잔액 배너 항상 표시 (충분/적음/없음 3단계 색상)
- [ ] 케이스 A: 상품 오류만 → 기존 다이얼로그 유지 (변경 없음 확인)
- [ ] 케이스 B: 잔액 부족만 → 잔액 부족 전용 다이얼로그 표시
- [ ] 케이스 C: 오류 + 잔액 부족 → 복합 다이얼로그 (두 영역 분리 표시)
- [ ] 케이스 D: 오류 있지만 정상건 잔액 OK → 기존 + 잔액 확인 정보 추가
- [ ] 개별 주문 잔액 부족 → 토스트 알림
- [ ] 기존 검증 알림 전체 정상 작동 유지
- [ ] 다이얼로그 디자인이 기존 UI와 통일
