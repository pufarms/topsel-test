# 탑셀러 회원정보 페이지 구현 지시서

## ⚠️ 절대 원칙
- 기존 코드, DB 구조, UI, 기능은 절대 수정하지 말 것
- 새로운 코드 추가와 기존 파일에 코드 추가만 허용
- TypeScript 타입 오류 없도록 작성
- 모든 에러는 try-catch로 처리
- 완료 후 추가/수정된 파일 목록과 변경 내용을 한국어로 요약

---

## 참고 디자인
첨부한 topsel_member_info.html 파일을 참고해서 동일한 디자인과 구조로 구현해줘.

### 디자인 핵심 요소
- 기존 사이트와 동일한 상단 헤더, 사이드바, 컬러 시스템 유지
- 화면 전체 너비에 맞게 자동으로 꽉 채우는 레이아웃 (max-width 제한 없음)
- 네이비 그라데이션 상단 배너 (회원 등급, 예치금, 포인터 표시)
- 카드 기반 섹션 구성

---

## PART 1 — 회원정보 페이지 (회원 대시보드 탭)

### 1-1. 상단 예치금 & 포인터 카드
- 예치금 카드 (네이비 그라데이션)
- 포인터 카드 (블루 그라데이션)
- [예치금 충전] 버튼 (오렌지 그라데이션) → 기존 충전 페이지 연결

### 1-2. 섹션 1 — 기본 정보 (수정 가능)

**담당자 (최대 3명)**
- 담당자명 + 휴대폰 번호 입력 (각 1~3번)
- 1번 담당자는 필수
- 저장 시 관리자 회원수정 페이지와 실시간 연계

**이메일**
- 현재 이메일 표시 (읽기 전용)
- [이메일 변경] 버튼 → 이메일 변경 모달 팝업
- 이메일 하단 안내문구: "※ 세금계산서 수신 이메일과 동일하게 적용됩니다."
- 저장 시 관리자 회원수정 페이지와 실시간 연계

**비밀번호**
- 현재 비밀번호 마스킹 표시 (읽기 전용)
- [비밀번호 변경] 버튼 → 비밀번호 변경 모달 팝업
- 저장 시 관리자 회원수정 페이지와 실시간 연계

**[변경사항 저장] 버튼**
- 담당자 정보 저장
- 저장 완료 시 성공 토스트 메시지 표시

### 1-3. 섹션 2 — 사업자 정보 (읽기 전용)
- 사업자등록번호, 상호명, 대표자명, 업태/종목, 사업장 주소
- 세금계산서 수신 이메일 → 회원 이메일과 동일하게 표시 + "회원정보 이메일과 동일" 뱃지
- 노란색 안내박스: "사업자 정보는 직접 수정이 불가합니다. 세금계산서 발행 및 거래 계약과 직결되는 정보로, 변경이 필요하신 경우 [변경 문의하기] 버튼을 이용해 주세요."
- [변경 문의하기] 버튼 → 문의 게시판 연결

### 1-4. 섹션 3 — 회원 등급 & 가입 정보 (읽기 전용)
- 현재 등급, 계정 상태, 가입일, 마지막 로그인

---

## PART 2 — 이메일 변경 모달

3단계 스텝 인디케이터 구성:

**STEP 1: 새 이메일 입력**
- 현재 이메일 표시 (읽기 전용)
- 새 이메일 입력창
- [인증번호 발송] 버튼
  - 클릭 시 POST /api/auth/email-verify/send 호출 (type: 'email_change')
  - 성공 시 STEP 2로 전환

**STEP 2: 인증번호 확인**
- 발송된 이메일 주소 안내 문구
- 6자리 개별 입력창 (자동 포커스 이동)
- 5분 카운트다운 타이머
- [재발송] 버튼
- [확인 완료] 버튼
  - 클릭 시 POST /api/auth/email-verify/confirm 호출 (type: 'email_change')
  - 성공 시 STEP 3으로 전환

**STEP 3: 변경 완료**
- ✅ 성공 메시지 + 변경된 이메일 표시
- 2.5초 후 자동 모달 닫힘
- 화면의 이메일 표시 즉시 업데이트

---

## PART 3 — 비밀번호 변경 모달

- 현재 비밀번호 입력
- 새 비밀번호 입력 (👁 보기/숨기기 토글)
- 실시간 비밀번호 강도 표시 (3단계: 약함/보통/강함)
  - 약함(빨강): 8자 이상
  - 보통(주황): 8자 + 영문+숫자
  - 강함(초록): 8자 + 영문+숫자+특수문자
- 새 비밀번호 확인 (실시간 일치 여부 표시)
- [비밀번호 변경] 버튼
  - 서버 측 현재 비밀번호 검증 후 변경

---

## PART 4 — 회원가입 시 이메일 인증 (기존 수정)

현재 회원가입 프로세스에서 이메일 인증 단계가 없음.
기존 회원가입 UI와 로직은 최대한 유지하면서 이메일 인증 단계만 추가해줘.

**추가할 내용:**
- 회원가입 폼에서 이메일 입력 후 [인증번호 발송] 버튼 추가
- 6자리 인증번호 입력창 추가
- POST /api/auth/email-verify/send (type: 'signup') 호출
- POST /api/auth/email-verify/confirm (type: 'signup') 호출
- 인증 완료 후에만 회원가입 최종 제출 가능하도록 처리
- 인증 완료 전 [가입 신청] 버튼 비활성화

---

## PART 5 — 관리자 비밀번호 초기화 이메일 발송

현재 관리자 회원관리 > 회원정보 수정 페이지에서 [비밀번호 초기화] 버튼이 있음.
이 버튼 클릭 시 임시 비밀번호를 생성하고 회원 이메일로 자동 발송되도록 연동해줘.

**처리 순서:**
1. 관리자가 [비밀번호 초기화] 버튼 클릭
2. "비밀번호를 초기화하고 임시 비밀번호를 회원 이메일로 발송하시겠습니까?" 확인 팝업
3. 확인 시 POST /api/auth/password-reset/send 호출
4. 임시 비밀번호 8자리 생성 (영문+숫자 조합)
5. 회원 이메일로 임시 비밀번호 발송 (sendTempPassword 함수 사용)
6. 성공 시 "임시 비밀번호가 이메일로 발송되었습니다." 토스트 메시지

**주의:** 기존 비밀번호 초기화 버튼 UI는 그대로 유지하고 동작 로직만 연동

---

## 완료 후 보고사항
- 추가/수정된 파일 목록
- 각 파일의 변경 내용 요약
- 테스트 방법
- 모두 한국어로 작성
