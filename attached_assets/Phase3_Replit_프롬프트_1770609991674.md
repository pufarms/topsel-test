# 탑셀러 외주 협력업체 시스템 - Phase 3 구현 프롬프트

## 외주업체 전용 대시보드 (/partner)

> **사용법**: 아래 프롬프트를 Phase 3-1부터 순서대로 Replit AI에 붙여넣기 하세요.
> 각 단계가 완료되면 다음 단계로 넘어갑니다.
> **반드시 순서대로 진행**해야 합니다 (3-0 → 3-1 → 3-2 → 3-3 → 3-4 → 3-5 → 3-6).
>
> **선행 조건**: Phase 1 (기본 인프라) + Phase 2 (배분 시스템) 완료 상태여야 합니다.

---

## Phase 3-0: 주문조정(직권취소) 연계 보완 (Phase 2-5 보완)

```
[작업 지시]
Phase 2-5의 배분 → 주문 배정(assign-orders) API를 보완합니다.
배분 확정 시 미배정 수량(공급 부족분)을 자동으로 기존 주문조정 상태로 전환하는 로직을 추가합니다.

⚠️ 중요 원칙:
- 기존 주문조정(admin-cancel) 기능은 100% 그대로 유지합니다.
- 기존 assign-orders API의 핵심 로직은 유지하고, 미배정분 처리 로직만 추가합니다.
- 기존 코드를 삭제하지 말고, 분기 추가 형태로 구현하세요.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[보완 내용]

1. assign-orders API 로직 수정:
   현재: 배분 확정된 수량만 주문에 배정
   추가: 배분 확정 후 미배정 잔여 수량이 있으면 해당 주문들을 "주문조정" 상태로 자동 전환

   구체적 흐름:
   a) 배분 확정 시 상품별 총 배정 수량 계산
   b) 해당 상품의 총 주문 수량과 비교
   c) 총 주문 수량 > 총 배정 수량이면 차이만큼 "주문조정" 상태로 전환
   d) 어떤 주문을 주문조정으로 돌릴지는 후입선출(나중 주문부터) 또는 관리자 선택
   e) 주문조정으로 전환된 주문은 기존 주문조정 페이지(admin-cancel)에서 확인/처리 가능

2. 배분 현황 화면에 수량 표시 추가:
   - 총 주문 수량
   - 배정 완료 수량
   - 주문조정 처리 수량 (미배정분)
   - 이 3개 수치가 항상 보이도록 표시

3. 주문조정 전환 시 기록:
   - 주문조정 사유: "외주 공급 부족 (배분 미배정)"
   - 관련 배분 ID 기록 (추적 가능하도록)
   - 기존 주문조정 테이블/필드 구조를 활용 (신규 테이블 불필요)

[확인 사항]
- 기존 주문조정 페이지에서 "외주 공급 부족" 사유로 필터 가능한지 확인
- 배분 확정 후 즉시 주문조정 전환이 이루어지는지 확인
- 기존 수동 주문조정 기능이 영향 없이 동작하는지 확인

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 수정된 파일 목록
- assign-orders API 변경 내용
- 배분 현황 화면 변경 내용
- 주문조정 연동 동작 확인 결과
```

---

## Phase 3-1: 외주업체 로그인 시스템 (/partner)

```
[작업 지시]
외주업체 전용 로그인 시스템과 대시보드 레이아웃을 구현합니다.
관리자 시스템과 완전히 분리된 별도의 인증 체계입니다.

⚠️ 중요 원칙:
- 관리자 인증 시스템(admin)에 절대 영향을 주지 마세요.
- /partner 경로는 관리자 시스템과 완전히 독립된 별도 라우트/레이아웃입니다.
- 기존 코드를 수정하지 말고, 새로운 파일을 추가하세요.
- 반응형 디자인 (모바일/태블릿/데스크톱) 필수 적용.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[1단계: 외주업체 전용 인증 API]

별도 라우트 파일로 생성하세요 (예: routes/partner/auth.js).
기존 관리자 인증 라우트는 절대 수정하지 마세요.

API 엔드포인트:
- POST /api/partner/login — 로그인
  - body: { loginId, loginPassword }
  - vendors 테이블에서 loginId로 조회
  - bcrypt.compare로 비밀번호 검증
  - isActive가 false면 "비활성 계정" 에러 반환
  - 성공 시 JWT 또는 세션 발급 (관리자 토큰과 구분되는 별도 토큰)
  - 토큰에 포함할 정보: vendorId, companyName, loginId
- POST /api/partner/logout — 로그아웃
- GET /api/partner/me — 현재 로그인 업체 정보 조회

인증 미들웨어:
- partnerAuth 미들웨어를 새로 생성 (기존 adminAuth와 별도)
- /api/partner/* 경로에만 적용
- 토큰 검증 실패 시 /partner/login으로 리다이렉트

[2단계: 로그인 페이지]

URL: /partner/login

화면 구성:
- 깔끔한 로그인 폼 (관리자 로그인과 다른 디자인)
- 상단: "탑셀러 협력업체" 또는 회사 로고
- 입력 필드: 아이디, 비밀번호
- 로그인 버튼
- 에러 메시지 표시 (잘못된 계정, 비활성 계정 등)
- 반응형: 모바일에서도 깔끔하게 표시

디자인 톤:
- 관리자 페이지와 구분되는 색상 (예: 파란색/청록색 계열)
- 폰트: Pretendard 또는 프로젝트에서 사용 중인 한글 폰트

[3단계: 대시보드 레이아웃]

URL: /partner (로그인 후 메인)

레이아웃 구성:
- 상단 헤더: "탑셀러 협력업체 포털" + 업체명 표시 + 로그아웃 버튼
- 좌측 사이드바 (데스크톱) / 하단 탭바 (모바일):
  메뉴 항목:
  1. 대시보드 (홈)
  2. 예상수량 응답
  3. 주문 현황
  4. 운송장 등록
  5. 배송 현황

- 대시보드 홈 화면:
  - 오늘의 요약 카드들:
    a) 응답 대기 배분 건수
    b) 미처리 주문 건수
    c) 미등록 운송장 건수
    d) 배송 중 건수
  - 각 카드 클릭 시 해당 메뉴로 이동

- 반응형:
  - 모바일: 사이드바 숨김, 하단 탭 네비게이션 사용
  - 태블릿: 사이드바 축소형 (아이콘만)
  - 데스크톱: 사이드바 전체 표시

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 생성된 파일 목록
- /partner/login 접속 시 로그인 화면 표시 여부
- vendors 테이블의 loginId/loginPassword로 로그인 가능 여부
- 로그인 후 /partner 대시보드 레이아웃 표시 여부
- 모바일 반응형 동작 여부
- 기존 관리자 로그인(/admin/login)이 영향 없이 동작하는지
```

---

## Phase 3-2: 예상수량 응답 화면

```
[작업 지시]
외주업체가 관리자가 보낸 배분 요청에 대해 가능수량을 응답하는 화면을 구현합니다.
Phase 2에서 구현된 배분 시스템의 업체측 응답 인터페이스입니다.

⚠️ 중요 원칙:
- Phase 2에서 만든 배분 관련 테이블/API 구조를 그대로 활용합니다.
- 관리자 배분 화면(Phase 2)의 기존 코드를 수정하지 마세요.
- 외주업체 인증(partnerAuth) 미들웨어를 사용하세요.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[1단계: API - 예상수량 응답]

별도 라우트 파일 (예: routes/partner/allocations.js)

API 엔드포인트:
- GET /api/partner/allocations — 현재 로그인 업체에 대한 배분 요청 목록 조회
  - 필터: 응답대기 / 응답완료 / 전체
  - 정렬: 최신순
  - 각 배분에 포함된 정보: 배분일자, 상품명, 예상수량, 마감시간, 응답상태
  - 로그인된 vendorId로 자동 필터링 (다른 업체 데이터 접근 불가)

- PUT /api/partner/allocations/:id/respond — 가능수량 응답
  - body: { availableQuantity, memo }
  - 해당 배분이 현재 로그인 업체의 것인지 반드시 검증
  - 응답 마감시간이 지났으면 에러 반환
  - Phase 2의 allocation_details 테이블 업데이트 (availableQuantity, respondedAt 등)

[2단계: 예상수량 응답 화면]

URL: /partner/allocations

화면 구성:
1. 응답 대기 목록 (상단, 강조 표시):
   - 테이블 또는 카드 형태
   - 컬럼: 배분일자, 상품명, 예상수량, 마감시간(남은시간 표시), 응답 버튼
   - 마감 임박(1시간 이내) 시 빨간색 경고 표시
   - "응답" 버튼 클릭 시 모달 또는 인라인으로:
     - 예상수량 표시 (읽기전용)
     - 가능수량 입력 (숫자, 0 가능)
     - 메모 입력 (선택)
     - 확인/취소 버튼

2. 응답 완료 목록 (하단):
   - 테이블: 배분일자, 상품명, 예상수량, 응답수량, 응답일시, 확정 여부
   - 확정된 건은 "확정" 뱃지, 미확정은 "대기" 뱃지

3. 알림 표시:
   - 대시보드 홈에서도 "응답 대기 N건" 숫자 실시간 반영

반응형:
- 모바일: 테이블 대신 카드 형태로 표시
- 응답 모달은 모바일에서 전체 화면으로 표시

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 생성된 파일 목록
- 응답 대기 목록이 현재 로그인 업체의 배분만 표시되는지
- 가능수량 응답 시 DB 업데이트 확인
- 관리자 배분 화면에서 업체 응답 내용이 반영되는지
- 마감시간 초과 시 응답 차단 여부
```

---

## Phase 3-3: 주문 현황 + 엑셀 다운로드

```
[작업 지시]
외주업체가 자신에게 배정된 주문 목록을 조회하고 엑셀로 다운로드하는 기능을 구현합니다.
배분 확정 → 주문 배정이 완료된 주문들을 업체별로 조회합니다.

⚠️ 중요 원칙:
- pending_orders 테이블의 vendorId로 필터링하여 해당 업체 주문만 표시합니다.
- 다른 업체의 주문 데이터에 절대 접근 불가하도록 보안 처리합니다.
- 기존 관리자 주문 관리 기능에 영향을 주지 마세요.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[1단계: API - 주문 현황 조회]

별도 라우트 파일 (예: routes/partner/orders.js)

API 엔드포인트:
- GET /api/partner/orders — 배정된 주문 목록 조회
  - 필터 조건:
    - 날짜 범위 (시작일 ~ 종료일, 기본값: 오늘)
    - 주문 상태 (신규배정 / 운송장등록 / 배송중 / 배송완료 / 전체)
    - 상품명 검색
  - 정렬: 배정일 최신순
  - 페이지네이션 지원
  - 반드시 vendorId = 로그인 업체 ID로 필터링
  - 표시 정보: 주문번호, 주문자명, 수취인명, 수취인 연락처, 수취인 주소, 상품명, 수량, 주문일, 배정일, 상태

- GET /api/partner/orders/download — 엑셀 다운로드
  - 위와 동일한 필터 조건 적용
  - 엑셀(.xlsx) 파일로 생성하여 다운로드
  - 엑셀 컬럼: 주문번호, 주문자명, 수취인명, 수취인 연락처, 수취인 주소(우편번호), 수취인 주소(기본주소), 수취인 주소(상세주소), 상품명, 수량, 주문일, 메모
  - 파일명: "탑셀러_주문목록_[업체명]_[날짜].xlsx"

[2단계: 주문 현황 화면]

URL: /partner/orders

화면 구성:
1. 필터 영역:
   - 날짜 선택 (시작일 ~ 종료일, 달력 피커)
   - 상태 필터 (전체/신규배정/운송장등록/배송중/배송완료)
   - 상품명 검색
   - 조회 버튼 + 엑셀 다운로드 버튼

2. 주문 목록 테이블:
   - 컬럼: 주문번호, 수취인명, 연락처, 주소(축약), 상품명, 수량, 상태, 배정일
   - 각 행 클릭 시 주문 상세 정보 모달/슬라이드 패널
   - 상태별 색상 뱃지 (신규배정=파랑, 배송중=주황, 배송완료=초록)

3. 요약 정보 (상단):
   - 조회 결과 총 건수
   - 상태별 건수 표시

반응형:
- 모바일: 테이블 대신 카드 리스트, 주소는 2줄로 표시
- 엑셀 다운로드 버튼은 모바일에서도 접근 가능

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 생성된 파일 목록
- 해당 업체에 배정된 주문만 표시되는지 (보안 검증)
- 날짜/상태 필터 동작 확인
- 엑셀 다운로드 기능 동작 확인
- 엑셀 파일 내 데이터 정확성
```

---

## Phase 3-4: 운송장 등록 (개별 + 엑셀 업로드)

```
[작업 지시]
외주업체가 배정된 주문에 운송장 번호를 등록하는 기능을 구현합니다.
개별 등록과 엑셀 일괄 업로드 두 가지 방식을 지원합니다.

⚠️ 중요 원칙:
- 운송장 등록은 해당 업체에 배정된 주문에 대해서만 가능합니다.
- 기존 관리자의 운송장/배송 관련 기능에 영향을 주지 마세요.
- pending_orders 테이블에 운송장 관련 필드가 없으면 추가하되, 기존 필드는 수정하지 마세요.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[0단계: DB 필드 확인 및 추가]

pending_orders 테이블에 아래 필드가 없으면 추가 (있으면 그대로 사용):
- trackingNumber: varchar(50) — 운송장 번호
- courierCompany: varchar(30) — 택배사명
- trackingRegisteredAt: timestamp — 운송장 등록 시간
- trackingRegisteredBy: varchar(20) DEFAULT 'vendor' — 등록 주체 (vendor / admin)

⚠️ 기존 필드는 절대 수정하지 마세요. ALTER TABLE ADD COLUMN으로만 추가.
이미 유사한 필드가 있다면 그것을 활용하세요 (중복 생성 금지).

[1단계: API - 운송장 등록]

별도 라우트 파일 (예: routes/partner/tracking.js)

API 엔드포인트:
- PUT /api/partner/orders/:id/tracking — 개별 운송장 등록
  - body: { trackingNumber, courierCompany }
  - 해당 주문이 현재 로그인 업체의 것인지 반드시 검증
  - 이미 운송장이 등록된 경우 덮어쓰기 (수정 가능)
  - 주문 상태를 "운송장등록" 또는 해당 상태로 업데이트

- POST /api/partner/orders/tracking/bulk — 엑셀 일괄 등록
  - 엑셀 파일 업로드 (multipart/form-data)
  - 엑셀 필수 컬럼: 주문번호, 택배사, 운송장번호
  - 처리 로직:
    a) 엑셀 파싱
    b) 각 행의 주문번호가 현재 업체의 주문인지 검증
    c) 유효한 건만 업데이트, 실패 건은 별도 목록으로 반환
    d) 결과: { success: N, failed: N, failedList: [...] }

- GET /api/partner/orders/tracking/template — 엑셀 업로드용 템플릿 다운로드
  - 빈 엑셀 파일에 헤더만 포함: 주문번호, 택배사, 운송장번호
  - 또는 현재 미등록 주문 목록이 미리 채워진 엑셀 제공

[2단계: 운송장 등록 화면]

URL: /partner/tracking

화면 구성:
1. 미등록 주문 목록 (상단, 강조):
   - 운송장 미등록 주문만 필터링
   - 테이블: 주문번호, 수취인명, 상품명, 수량, 배정일
   - 각 행에 "등록" 버튼
   - "등록" 클릭 시 인라인 또는 모달:
     - 택배사 드롭다운 (CJ대한통운, 한진택배, 롯데택배, 우체국택배, 로젠택배, 경동택배, 기타)
     - 운송장 번호 입력
     - 저장 버튼

2. 엑셀 일괄 등록 영역:
   - "양식 다운로드" 버튼 (미등록 주문 목록이 채워진 엑셀)
   - 파일 업로드 영역 (드래그 앤 드롭 지원)
   - 업로드 결과: 성공 N건 / 실패 N건
   - 실패 건 목록 표시 (사유: 주문번호 불일치, 이미 등록됨 등)

3. 등록 완료 목록 (하단):
   - 최근 등록한 운송장 목록
   - 테이블: 주문번호, 수취인명, 택배사, 운송장번호, 등록일시
   - 운송장 수정 버튼 (등록 후에도 수정 가능)

반응형:
- 모바일: 미등록 목록은 카드 형태, 택배사는 드롭다운 유지
- 엑셀 업로드는 모바일에서 파일 선택 버튼으로 표시

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 생성된 파일 목록
- DB 필드 추가/활용 현황
- 개별 운송장 등록 동작 확인
- 엑셀 템플릿 다운로드 동작 확인
- 엑셀 일괄 업로드 동작 확인 (성공/실패 건 분리)
- 다른 업체 주문에 운송장 등록 시도 시 차단 확인
- 기존 관리자 주문 관리 화면에서 운송장 정보 표시 여부
```

---

## Phase 3-5: 배송 현황 조회

```
[작업 지시]
외주업체가 운송장 등록 후 배송 진행 상황을 조회하는 화면을 구현합니다.
운송장 등록 → 배송중 → 배송완료 상태를 추적합니다.

⚠️ 중요 원칙:
- 해당 업체 주문만 조회 가능 (vendorId 필터링 필수).
- 기존 배송 관련 기능에 영향을 주지 마세요.
- 배송 상태 업데이트는 현재 수동(관리자) 또는 기존 로직 활용.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[1단계: API - 배송 현황 조회]

별도 라우트 파일 (예: routes/partner/delivery.js)

API 엔드포인트:
- GET /api/partner/delivery — 배송 현황 목록
  - 필터: 날짜 범위, 배송 상태 (운송장등록/배송중/배송완료), 수취인명/주문번호 검색
  - 페이지네이션
  - vendorId 필터링 필수
  - 표시 정보: 주문번호, 수취인명, 상품명, 수량, 택배사, 운송장번호, 배송상태, 발송일, 배송완료일

- GET /api/partner/delivery/summary — 배송 통계 요약
  - 오늘/이번주/이번달 기준:
    - 총 발송 건수
    - 배송중 건수
    - 배송완료 건수
    - 배송완료율 (%)

[2단계: 배송 현황 화면]

URL: /partner/delivery

화면 구성:
1. 통계 요약 카드 (상단):
   - 오늘 발송: N건
   - 배송중: N건
   - 배송완료: N건
   - 완료율: N%
   - 기간 전환 탭 (오늘 / 이번주 / 이번달)

2. 필터 영역:
   - 날짜 범위 선택
   - 배송 상태 필터 (전체/운송장등록/배송중/배송완료)
   - 검색 (수취인명, 주문번호)
   - 조회 버튼

3. 배송 목록 테이블:
   - 컬럼: 주문번호, 수취인명, 상품명, 택배사, 운송장번호, 상태, 발송일, 완료일
   - 상태 뱃지 색상: 운송장등록=회색, 배송중=파랑, 배송완료=초록
   - 운송장 번호 클릭 시 택배사 배송추적 URL로 새 탭 열기 (가능한 경우)

택배사 배송추적 URL 매핑 (가능한 경우):
- CJ대한통운: https://trace.cjlogistics.com/web/detail.jsp?slipno={운송장번호}
- 한진택배: https://www.hanjin.com/kor/CMS/DeliveryMgr/WaybillResult.do?mession-id={운송장번호}
- 롯데택배: https://www.lotteglogis.com/home/reservation/tracking/link498?InvNo={운송장번호}
- 우체국택배: https://service.epost.go.kr/trace.RetrieveDomRi498.comm?sid1={운송장번호}
- 경동택배: https://kdexp.com/service/info/deliveryInfo.do?barcode={운송장번호}

(URL이 변경되었을 수 있으므로, 링크 열기는 best-effort로 구현하세요)

반응형:
- 모바일: 통계 카드는 2x2 그리드, 테이블은 카드 형태
- 운송장 번호는 모바일에서도 클릭 가능

[결과 보고]
한글로 다음 항목을 보고해 주세요:
- 생성된 파일 목록
- 배송 통계 요약 데이터 정상 표시 여부
- 필터/검색 동작 확인
- 해당 업체 배송 데이터만 표시되는지 (보안)
- 택배사 배송추적 링크 동작 여부
- 기간 전환 (오늘/이번주/이번달) 동작 확인
```

---

## Phase 3-6: 통합 테스트 + 대시보드 홈 실시간 연동

```
[작업 지시]
Phase 3 전체 기능의 통합 테스트를 수행하고, 대시보드 홈 화면의 요약 카드가 실시간으로 연동되는지 확인합니다.

⚠️ 중요 원칙:
- 기존 관리자 기능이 모두 정상 동작하는지 확인합니다.
- Phase 1, Phase 2에서 구현한 기능이 깨지지 않았는지 확인합니다.
- 문제가 있으면 수정하되, 기존 기능 복구가 최우선입니다.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[확인 1] 외주업체 로그인/로그아웃 플로우
a) /partner/login 접속 → 로그인 폼 표시
b) vendors 테이블에 등록된 loginId/loginPassword로 로그인 성공
c) 비활성(isActive=false) 업체 로그인 시 적절한 에러 메시지
d) 로그인 후 /partner 대시보드 메인 화면 표시
e) 로그아웃 후 /partner/login으로 리다이렉트
f) 인증 없이 /partner/* 페이지 접근 시 로그인 페이지로 리다이렉트

[확인 2] 예상수량 응답 연동
a) 관리자가 배분 생성 → 해당 업체 /partner/allocations에 응답 대기로 표시
b) 업체가 가능수량 응답 → 관리자 배분 화면에 응답 내용 반영
c) 마감시간 초과 후 응답 시도 → 차단
d) A업체 로그인 시 B업체의 배분 데이터 접근 불가

[확인 3] 주문 현황 보안
a) 배분 확정 → 주문 배정 완료 후 해당 업체의 /partner/orders에 주문 표시
b) A업체 로그인 시 B업체에 배정된 주문 접근 불가
c) 엑셀 다운로드 시 해당 업체 주문만 포함

[확인 4] 운송장 등록 동작
a) 개별 운송장 등록 → 주문 상태 업데이트
b) 엑셀 일괄 등록 → 성공/실패 건 분리 확인
c) 다른 업체 주문에 운송장 등록 시도 → 차단
d) 관리자 화면에서 업체가 등록한 운송장 정보 확인 가능

[확인 5] 배송 현황 데이터
a) 운송장 등록 → 배송 현황에 반영
b) 통계 요약 수치 정확성
c) 기간 전환 동작

[확인 6] 대시보드 홈 실시간 연동
a) 응답 대기 배분 건수 — allocations 페이지의 대기 건수와 일치
b) 미처리 주문 건수 — orders 페이지의 신규배정 건수와 일치
c) 미등록 운송장 건수 — tracking 페이지의 미등록 건수와 일치
d) 배송 중 건수 — delivery 페이지의 배송중 건수와 일치

[확인 7] 주문조정(직권취소) 연계 (Phase 3-0)
a) 배분 확정 시 미배정분이 주문조정 상태로 전환되는지
b) 기존 주문조정 페이지에서 "외주 공급 부족" 사유로 확인 가능한지
c) 배분 현황에 배정완료/주문조정 수량이 표시되는지

[확인 8] 기존 기능 무결성 (Phase 1, 2)
a) 관리자 로그인 정상 동작
b) 상품 등록 (외주/자체) 정상 동작
c) 주문 관리 (업로드, 상태변경, 배송) 정상 동작
d) 배분 시스템 (집계, 알림, 회신, 확정, 배정) 정상 동작
e) 외주업체 관리 (등록, 수정, 활성/비활성) 정상 동작

[확인 9] 반응형 디자인
a) /partner 전체 페이지 — 모바일(375px) 정상 표시
b) /partner 전체 페이지 — 태블릿(768px) 정상 표시
c) /partner 전체 페이지 — 데스크톱(1280px) 정상 표시
d) 모바일 하단 탭 네비게이션 정상 동작

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[결과 보고]
각 확인 항목별로 현재 상태와 수정 여부를 한글로 보고해 주세요:
- 확인 1: [현재 상태] → [수정 필요 여부]
- 확인 2: [현재 상태] → [수정 필요 여부]
- 확인 3: [현재 상태] → [수정 필요 여부]
- 확인 4: [현재 상태] → [수정 필요 여부]
- 확인 5: [현재 상태] → [수정 필요 여부]
- 확인 6: [현재 상태] → [수정 필요 여부]
- 확인 7: [현재 상태] → [수정 필요 여부]
- 확인 8: [현재 상태] → [수정 필요 여부]
- 확인 9: [현재 상태] → [수정 필요 여부]
```

---

## 트러블슈팅 가이드

### 문제가 발생하면 아래 프롬프트를 사용하세요:

```
[긴급 수정 요청]
방금 작업한 내용에서 문제가 발생했습니다.

문제 현상: [여기에 에러 메시지 또는 문제 설명 입력]

⚠️ 수정 원칙:
- 이번 단계에서 변경한 코드만 수정하세요.
- 기존 코드(이번 단계 이전에 존재하던 코드)는 수정하지 마세요.
- 수정 전후 차이를 한글로 설명해 주세요.
- 수정 후 기존 기능이 정상 동작하는지 확인해 주세요.
```

### 기존 기능이 깨졌을 때:

```
[기존 기능 복구 요청]
이번 작업 후 기존 기능에 문제가 발생했습니다.

깨진 기능: [여기에 문제가 된 기존 기능 설명]

⚠️ 복구 원칙:
- 이번 단계에서 추가/수정한 코드에서 원인을 찾아주세요.
- 기존 코드를 원래대로 되돌리고, 새 기능은 다른 방법으로 구현해 주세요.
- 기존 기능 복구가 최우선입니다. 새 기능은 기존 기능에 영향이 없는 방식으로만 추가하세요.
- 결과를 한글로 보고해 주세요.
```

### 외주업체 로그인이 안 될 때:

```
[외주업체 로그인 디버깅]
/partner/login에서 로그인이 되지 않습니다.

확인해야 할 사항:
1. vendors 테이블에 loginId가 정상 저장되어 있는지
2. loginPassword가 bcrypt 해시로 저장되어 있는지
3. partnerAuth 미들웨어가 정상 동작하는지
4. JWT/세션 토큰이 관리자용과 분리되어 있는지
5. 라우트 경로가 /api/partner/login으로 정확한지

각 항목 확인 결과를 한글로 보고해 주세요.
```
