# 탑셀러 AI 상세페이지 마법사 — 최종 설계서 + Replit 개발 지시서

---

## ⚠️ 전체 협의 사항 체크리스트 (개발 전 필독)

아래 15개 항목은 모두 사용자와 직접 협의하여 확정된 내용입니다.
개발 시 하나도 빠뜨리지 말고 반드시 준수해주세요.

```
[디자인/구조]
☐ 1. 과일 산지 감성 중시 — 과수원, 수확, 선별, 포장 등 토속적 이미지
☐ 2. 여유공간 + 여백 많이 활용, 빽빽한 배치 금지, 사진 중심
☐ 3. 한 섹션 = 큰 사진 1장 + 강력한 카피 1줄

[카피 시스템]
☐ 4. 5명 카피라이터 로직을 히어로만 아닌 모든 8개 섹션에 적용
☐ 5. 5명을 섹션별로 고정하지 않고, 전원이 각 섹션 카피 생성 → 사용자 선택
☐ 6. 히어로의 카피 편집 기능(크기/색깔/폰트/위치)을 모든 섹션에서 동일 제공

[비용/API]
☐ 7. 방식A 확정: 사용자가 자기 Google AI API Key 입력
☐ 8. 비용: 1회 약 $0.34(500원), 무료 티어로 하루 62개 가능
☐ 9. 우리 사이트는 "도구"만 제공, AI 호출은 사용자 Key → Google 직접

[홍보 섹션]
☐ 10. 앱 첫 화면에 홍보/랜딩 섹션 표시 (왜 좋은지 설득)
☐ 11. 다크 테마 + 네온/글로우 + 파티클/타이핑 애니메이션
☐ 12. 세련되고 임팩트 있는 디자인 — 대충 만들지 말 것!

[시스템 통합]
☐ 13. 관리자 대시보드 좌측 탭 + 회원 마이페이지 좌측 탭에 설치
☐ 14. 기존 탑셀러 코드/로직/테이블과 완전 분리 (독립 폴더)
☐ 15. 단, 회원 정보(세션, 이름, 등급)는 읽기 전용으로 공유

[API Key 관리]
☐ 16. 관리자/회원 각자 개별 API Key → 서버 DB 암호화 저장
☐ 17. 본인 Key만 조회/사용 가능 (다른 회원 Key 접근 절대 불가)
☐ 18. 회원에게 API Key 발급 방법을 쉽고 자세하게 앱 내 가이드 제공
```

---

# PART 1: 최종 확정 설계서 (v2.0)

---

## 1. 프로젝트 개요

### 정의
과일 상품의 **완전한 상세페이지(8개 섹션)**를 AI가 자동 생성하고,
사용자가 각 섹션별로 카피를 선택·편집하여 최종 이미지 세트를 다운로드하는 **프론트엔드 전용 도구**

### 원본 앱
- 한이룸의 상세페이지 마법사 1.0 (Google AI Studio 전용)
- 히어로 섹션 1장만 생성
- 5명 카피라이터 + AI 배경 합성 + 텍스트 에디터

### 확장 앱 (우리가 만들 것)
- **독립 웹 앱** (탑셀러 사이트 내 탭페이지)
- 히어로 1장 → **8개 섹션 전체** 상세페이지
- 5명 카피라이터를 **모든 섹션에 적용** → 사용자 선택
- **사용자 API Key 입력 방식** (크레딧 시스템 없음)
- 프론트엔드만으로 동작 (백엔드 프록시 불필요)

### 설치 위치
```
관리자 대시보드 → 좌측 메뉴에 "AI 상세페이지" 탭 추가
회원 마이페이지 → 좌측 메뉴에 "AI 상세페이지" 탭 추가
```

### 사용자 구분
| 구분 | 접근 위치 | API Key | 저장 위치 |
|------|----------|---------|----------|
| **관리자** | 관리자 대시보드 > AI 상세페이지 탭 | 탑셀러 운영용 Key | DB (users 테이블, 관리자 행) |
| **회원** | 마이페이지 > AI 상세페이지 탭 | 각자 개인 Key | DB (users 테이블, 해당 회원 행) |

### API Key 격리 원칙 (⚠️ 최우선 보안 규칙)
```
1. 각 회원의 API Key는 users 테이블에서 해당 user_id 행에만 저장
2. 조회 시 반드시 세션의 user_id로 본인 Key만 조회
3. 다른 회원의 Key는 절대 접근/조회/노출 불가
4. 관리자도 본인 Key만 사용 (회원 Key 대리 사용 불가)
5. Key는 암호화하여 DB에 저장, 조회 시 복호화
```

### ⚠️ 기존 탑셀러 시스템과의 완전 분리 원칙

이 AI 상세페이지 기능은 기존 탑셀러 Replit 프로젝트의 다른 기능(주문관리, 정산, 회원관리, 상품관리, 입금자동화, 세금계산서, 알림 등)과 **완전히 분리**되어야 합니다.

```
⚠️ 분리 규칙 (절대 위반 금지)

1. 파일 분리
   - 모든 AI 상세페이지 관련 파일은 독립 폴더에 위치
   - 프론트: /client/src/pages/ai-studio/ (또는 유사 독립 경로)
   - 백엔드: /server/routes/ai-studio.ts (또는 유사 독립 파일)
   - 기존 파일(주문, 정산, 상품 등)을 수정하지 말 것
   - 예외: 좌측 메뉴에 탭 링크 추가하는 것만 허용

2. 라우트 분리
   - 프론트 라우트: /ai-studio/*
   - 백엔드 API: /api/ai-studio/*
   - 기존 API 엔드포인트와 겹치지 않도록 ai-studio 네임스페이스 사용

3. DB 분리
   - users 테이블에 컬럼 2개만 추가 (gemini_api_key, gemini_api_key_updated_at)
   - 새 테이블 생성이 필요하면 ai_studio_ 접두사 사용
   - 기존 테이블(orders, products, settlements 등)에 절대 손대지 말 것

4. 로직 분리
   - 기존 서비스/유틸 함수를 import하여 사용하지 말 것
   - 세션/인증 미들웨어만 공유 (requireAuth 등)
   - AI 기능에 필요한 유틸은 자체 폴더 내에 별도 작성

5. 의존성 분리
   - 필요한 npm 패키지는 package.json에 추가 가능
   - 단, 기존 패키지의 버전을 변경하지 말 것

6. 장애 격리
   - AI 상세페이지에 오류가 생겨도 기존 기능에 영향 없어야 함
   - 기존 기능에 오류가 생겨도 AI 상세페이지에 영향 없어야 함
   - 서로 독립적으로 동작

요약: "좌측 메뉴에 탭 링크 추가" + "users 테이블에 컬럼 2개 추가"
      이 두 가지만 기존 코드에 닿고, 나머지는 100% 독립 폴더에서 작업
```

### 기존 시스템과의 유일한 접점 (3개만)
```
접점 1: 좌측 메뉴 탭 추가
  - 관리자 대시보드 사이드바 → "AI 상세페이지" 메뉴 항목 추가
  - 회원 마이페이지 사이드바 → "AI 상세페이지" 메뉴 항목 추가
  - 클릭 시 /ai-studio 라우트로 이동

접점 2: users 테이블 컬럼 추가
  - gemini_api_key (TEXT, nullable)
  - gemini_api_key_updated_at (TIMESTAMP, nullable)
  - 기존 컬럼/로직에 영향 없음

접점 3: ⚠️ 회원 정보 공유 (읽기 전용)
  - AI 상세페이지 앱은 독립적으로 동작하지만,
    기존 탑셀러 시스템의 회원 정보를 "읽어서" 활용해야 함
  - 로그인/세션: 기존 인증 시스템을 그대로 사용 (별도 로그인 없음)
  - 회원 이름: 앱 내에서 "OOO님, 상세페이지를 만들어보세요" 표시
  - 회원 등급 (Start/Driving/Top): 등급별 이용 권한 분기 가능
  - 회원 연락처/사업자 정보: 필요 시 폼 자동 채움에 활용
  - 관리자 여부 (role = admin): 관리자 대시보드 vs 마이페이지 분기
```

### ⚠️ 회원 정보 공유 상세 규칙
```
[핵심 원칙]
- 기존 회원 정보를 "읽기만" 함 (수정/삭제 절대 금지)
- 기존 세션/인증 미들웨어를 공유하여 로그인 상태 확인
- 별도 로그인 불필요 (탑셀러에 로그인되어 있으면 바로 사용)

[공유되는 회원 정보]
┌──────────────────────────────────────────────┐
│  기존 탑셀러 시스템 (users 테이블)              │
│                                              │
│  - user_id (세션에서)     → 본인 식별          │
│  - name (회원 이름)       → UI에 이름 표시      │
│  - role (등급/권한)       → admin/start/driving/top │
│  - email (이메일)         → 선택적 표시         │
│  - phone (연락처)         → 선택적 표시         │
│  - business_name (상호)   → 자동 채움 가능      │
│                                              │
│  ※ 읽기 전용! AI 앱에서 이 정보를 수정하지 않음  │
└──────────────────────────────────────────────┘
    │ 읽기 전용 공유
    ▼
┌──────────────────────────────────────────────┐
│  AI 상세페이지 앱 (독립 모듈)                   │
│                                              │
│  - 로그인 확인: 세션 있으면 바로 접근 허용        │
│  - 이름 표시: "김탑셀님, 상세페이지를 만들어보세요"│
│  - 등급 확인: role로 접근 권한 분기              │
│  - API Key: users.gemini_api_key (이것만 쓰기)  │
└──────────────────────────────────────────────┘

[읽기 방법]
- 기존 세션 미들웨어(requireAuth) 사용
- req.session에서 userId, role 등 확인
- 필요한 추가 정보는 users 테이블에서 SELECT로 읽기
- 예시:
  const user = await db.query(
    'SELECT name, role, email FROM users WHERE id = $1',
    [req.session.userId]
  );

[절대 하지 말 것]
- users 테이블의 기존 컬럼(name, role, email 등)을 UPDATE 하지 말 것
- 기존 인증 로직을 수정하지 말 것
- 기존 세션 구조를 변경하지 말 것
- 회원 등급(role)을 AI 앱에서 변경하지 말 것
```

### 비용 구조
```
탑셀러 서버 비용: 거의 0원 (Key 저장 API 3개만 추가)
사용자 비용: 무료 (Google AI Studio 무료 티어 사용)
  - 무료 티어: 하루 이미지 500장 = 약 62개 상세페이지
  - 유료 시 1회 약 500원 (이미지 8장 + 텍스트 8회)
```

---

## 2. 핵심 설계 원칙

### 디자인 원칙 (⚠️ 사용자 협의 사항 — 반드시 준수)
```
1. 사진이 주역, 카피는 조역
   → 구조를 빽빽하게 좁게 배치하지 말 것
   → 여유공간을 두고 여백을 많이 활용해서 사진을 배치
   → 카피는 필요한 부분에 간단하면서도 강하게 한 개씩만 어필

2. 한 섹션 = 큰 사진 1장 + 강력한 카피 1줄
   → 스크롤마다 새로운 큰 사진이 시원하게 등장
   → 텍스트가 사진을 가리지 않도록 배치

3. 여백 넉넉 — 빽빽한 정보 나열 절대 금지
   → 각 섹션 사이에 충분한 간격
   → 이미지 안에서도 카피는 여백 공간에 배치
   → 깔끔하고 시원한 레이아웃이 핵심

4. AI가 생성하는 이미지 자체가 이미 "여백 있는 사진 중심" 구도
   → 이미지 프롬프트에 "spacious composition, clean layout" 포함
```

### 과일 특화 원칙
- 신선함과 산지직송 감성이 핵심
- 과수원, 수확, 선별, 포장 등 토속적 이미지
- 먹음직스러운 비주얼 최우선 (과즙, 단면, 크기감)
- 제철/계절감 강조, 산지 브랜딩 차별화

### 카피 원칙 (⚠️ 사용자 협의 사항 — 반드시 준수)
```
1. 모든 섹션에서 5명 카피라이터가 각각 카피 생성 (총 5개)
   → 특정 카피라이터를 특정 섹션에 고정하지 않음
   → 5명 전원이 각 섹션에 맞는 카피를 각자 만듦
   → 사용자가 마음에 드는 것을 선택해서 적용

2. 현재 히어로 섹션의 카피 편집 기능을 모든 섹션에 동일하게 적용
   → 사용자가 카피를 선택한 후:
     · 크기 변경 가능
     · 색깔 변경 가능
     · 폰트 변경 가능
     · 위치(드래그) 변경 가능
   → 원본 앱 Editor.tsx의 편집 기능을 8개 섹션 모두에서 재사용

3. 카피 길이: 20~30자 이내, 짧고 강렬하게
   → 설명문 아닌 한 마디 Hook
```

---

## 3. 앱 전체 구조

### 3-1. 페이지 흐름
```
[탭 진입]
    │
    ▼
┌─────────────────────────────┐
│ 🎬 홍보/랜딩 섹션             │  ← 첫 화면 (다크테마 + 네온글로우)
│    "이 도구를 쓰면 뭐가 좋은지" │     파티클/타이핑 애니메이션
│                             │
│    [무료로 시작하기] CTA 버튼   │
└─────────────────────────────┘
    │ 버튼 클릭
    ▼
┌─────────────────────────────┐
│ 🔑 API Key 입력 화면          │  ← "발급 방법 보기" 가이드 내장
│    (서버 DB 암호화 저장)      │     한번 입력 후 재방문시 스킵
└─────────────────────────────┘
    │ Key 검증 성공
    ▼
┌─────────────────────────────┐
│ 📝 제품 정보 입력             │  ← 과일 종류, 산지, 당도 등
│ 📷 이미지 업로드              │
│ 📐 비율 선택                 │
└─────────────────────────────┘
    │ "생성하기" 클릭
    ▼
┌─────────────────────────────┐
│ 🔄 AI 생성 로딩              │  ← 8개 섹션 순차 생성 프로그레스
└─────────────────────────────┘
    │ 생성 완료
    ▼
┌─────────────────────────────┐
│ 🎨 섹션별 에디터              │  ← 8개 섹션 순회
│    (카피 5개 추천 → 선택 →    │     현재 앱 에디터 기반 확장
│     크기/색상/위치 편집)       │
└─────────────────────────────┘
    │ 8개 섹션 모두 완료
    ▼
┌─────────────────────────────┐
│ 👀 전체 미리보기              │  ← 8장 세로 나열
│ 📥 최종 다운로드              │     ZIP 또는 개별 JPG
└─────────────────────────────┘
```

### 3-2. 데이터 흐름
```
[사용자 브라우저]
    │
    ├── 앱 UI (탑셀러 서버에서 페이지 제공)
    │
    ├── API Key 관리 (탑셀러 서버 경유)
    │    ├── GET  /api/ai-studio/api-key  → 본인 Key 조회
    │    ├── POST /api/ai-studio/api-key  → Key 저장/수정
    │    └── DELETE /api/ai-studio/api-key → Key 삭제
    │    ※ 세션의 user_id로 본인 Key만 접근 (격리 보장)
    │
    └── Gemini API 호출 (사용자 Key → Google 직접 통신)
         ├── gemini-3-flash-preview (카피 생성)
         └── gemini-2.5-flash-image (배경 합성)
         ※ 탑셀러 서버를 거치지 않음 (프론트엔드 직접)
```

### 3-3. API Key 저장 구조
```sql
-- users 테이블에 컬럼 추가
ALTER TABLE users ADD COLUMN gemini_api_key TEXT;              -- 암호화된 Key
ALTER TABLE users ADD COLUMN gemini_api_key_updated_at TIMESTAMP; -- 업데이트 일시

-- 조회 예시 (반드시 세션 user_id로만)
SELECT gemini_api_key FROM users WHERE id = {session.user_id};

-- 저장 예시 (암호화 후 저장)
UPDATE users SET 
  gemini_api_key = {encrypted_key},
  gemini_api_key_updated_at = NOW()
WHERE id = {session.user_id};
```

---

## 4. 홍보/랜딩 섹션 (앱 첫 화면)

### 디자인 톤
- **다크 테마** (배경 #0a0a0f ~ #111827)
- **네온/글로우 효과** (보라+파랑+청록 그라디언트)
- **파티클 효과** (배경에 떠다니는 미세한 빛 입자)
- **타이핑 애니메이션** (히어로 헤드라인)
- AI Studio/미래적 느낌

### 구성 섹션 (세로 스크롤)

#### ① 히어로 영역
```
[파티클 배경 애니메이션]

        🤖 AI 아이콘 (글로우 효과)

   "상품 사진 1장이
    완성된 상세페이지 8장이 됩니다"
       ↑ 타이핑 애니메이션

   "5명의 전설적 AI 카피라이터가 당신의 상품을 팝니다"
       ↑ 페이드인

   ┌─────────────────────┐
   │  ✨ 무료로 시작하기    │  ← 네온 글로우 CTA 버튼
   └─────────────────────┘
```

#### ② 핵심 가치 3개 카드
```
┌──────────┐  ┌──────────┐  ┌──────────┐
│  🎨      │  │  ✍️      │  │  📱      │
│ AI 배경   │  │ AI 카피   │  │ 간편 편집  │
│ 합성     │  │ 라이터    │  │          │
│          │  │          │  │          │
│ 산지직송   │  │ 5명의    │  │ 클릭 한번  │
│ 감성을    │  │ 전설적    │  │ 으로      │
│ AI가     │  │ 카피라이터 │  │ 크기/색상  │
│ 만듭니다  │  │ 가 제안   │  │ /위치 편집 │
└──────────┘  └──────────┘  └──────────┘
         (글래스모피즘 카드, 호버시 글로우)
```

#### ③ 사용법 3단계
```
 STEP 1              STEP 2              STEP 3
 📷                  ⚡                  🎉
 사진 올리고          AI가 만들고          선택하고 다운로드
 ─────── → ────────── → ──────────
                (프로그레스 라인 애니메이션)
```

#### ④ 비용 안내
```
┌─────────────────────────────┐
│  💰 완전 무료                │
│                             │
│  Google AI Studio API Key만  │
│  있으면 바로 사용 가능        │
│                             │
│  하루 최대 62개 상세페이지     │
│  생성 가능 (무료 티어 기준)    │
│                             │
│  ┌───────────────────────┐  │
│  │  🔑 API Key 발급 방법   │  │  ← 클릭시 가이드 모달
│  └───────────────────────┘  │
└─────────────────────────────┘
```

#### ⑤ 최종 CTA
```
   "지금 바로 상세페이지를 만들어보세요"

   ┌─────────────────────┐
   │  🚀 시작하기          │  ← 네온 글로우 CTA
   └─────────────────────┘
```

---

## 5. API Key 입력 & 가이드

### 5-1. API Key 입력 화면
```
┌─────────────────────────────────┐
│                                 │
│  🔑 Google AI API Key 입력       │
│                                 │
│  ┌───────────────────────────┐  │
│  │ AIzaSy...                 │  │  ← 입력 필드 (마스킹 표시)
│  └───────────────────────────┘  │
│                                 │
│  [Key 없으신가요? 3분 만에 발급] │  ← 클릭시 가이드 표시
│                                 │
│  ┌─────────────────────────┐    │
│  │  ✅ 저장 및 연결하기      │    │  ← 검증 → DB 저장 → 진행
│  └─────────────────────────┘    │
│                                 │
│  🔒 키는 암호화되어 안전하게     │
│     저장됩니다. 본인만 사용      │
│     가능합니다.                 │
│                                 │
│  [저장된 Key 삭제하기]           │  ← Key 삭제 옵션
└─────────────────────────────────┘

※ 이미 Key가 저장된 경우:
┌─────────────────────────────────┐
│  ✅ API Key가 연결되어 있습니다   │
│     (AIzaSy...****)             │  ← 마지막 4자리만 표시
│                                 │
│  [Key 변경]  [Key 삭제]          │
│                                 │
│  ┌─────────────────────────┐    │
│  │  🚀 상세페이지 만들기     │    │  ← 바로 사용
│  └─────────────────────────┘    │
└─────────────────────────────────┘
```

### 5-2. API Key 발급 가이드 (앱 내 모달)
```
━━━━ API Key 발급 방법 (3분이면 끝!) ━━━━

Step 1️⃣  Google AI Studio 접속
   → aistudio.google.com
   → Google 계정으로 로그인
   [스크린샷 이미지]

Step 2️⃣  "Get API Key" 클릭
   → 왼쪽 메뉴 또는 상단 버튼
   [스크린샷 이미지]

Step 3️⃣  Key 생성 & 복사
   → "Create API Key" 클릭
   → 생성된 키 복사
   [스크린샷 이미지]

Step 4️⃣  이 앱에 붙여넣기
   → 위 입력란에 붙여넣고 "저장 및 연결하기" 클릭

💡 팁:
- 무료로 사용 가능합니다
- 하루 이미지 500장까지 무료
- Key는 암호화되어 안전하게 저장됩니다
- 본인 계정에서만 사용 가능합니다

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 5-3. Key 저장 방식 (⚠️ 보안 핵심)
```
[저장 흐름]
사용자 Key 입력
    → 프론트: validateApiKey()로 유효성 검증
    → 검증 성공 → POST /api/ai-studio/api-key { key: '...' }
    → 서버: 세션에서 user_id 확인
    → 서버: Key를 AES-256 암호화
    → 서버: UPDATE users SET gemini_api_key = {encrypted} WHERE id = {user_id}
    → 완료

[조회 흐름]
페이지 로드
    → GET /api/ai-studio/api-key
    → 서버: 세션에서 user_id 확인
    → 서버: SELECT gemini_api_key FROM users WHERE id = {user_id}
    → 서버: 복호화 → 프론트엔드에 전달
    → Key 있으면 → 입력 화면 스킵, 바로 사용
    → Key 없으면 → 입력 화면 표시

[삭제 흐름]
"Key 삭제" 클릭
    → DELETE /api/ai-studio/api-key
    → 서버: UPDATE users SET gemini_api_key = NULL WHERE id = {user_id}

[격리 보장]
- 모든 API에서 반드시 session.user_id로만 조회/수정
- URL에 user_id를 받지 않음 (세션에서만 추출)
- 관리자도 회원의 Key를 조회할 수 없음
```

---

## 6. 8개 섹션 상세 정의

### 섹션별 AI 이미지 프롬프트 + 카피 프롬프트

#### 섹션 1: 히어로 배너
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Premium studio lighting,
 water droplets on surface, fresh morning dew feel,
 luxury food photography, soft bokeh background."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 3초 안에 스크롤을 멈추게 하는 첫인상.
 '이 과일 먹어보고 싶다'는 강한 감성을 불러일으킬 것."
```

#### 섹션 2: 문제 공감
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Soft warm-toned kitchen table,
 natural window light, cozy home atmosphere, slightly
 blurred background, relatable everyday setting."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 과일 구매 실패 경험에 대한 공감 유발.
 '맞아, 나도 그랬어!' 느낌의 한 마디."
```

#### 섹션 3: 사회적 증거
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Clean minimal white/cream
 background, professional product photography, trust-
 building composition, subtle gradient."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 판매 실적/리뷰/인증 수치로 신뢰 구축.
 숫자를 포함한 팩트 기반 한 마디."
```

#### 섹션 4: 맛/품질 상세
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Close-up macro photography
 style, juice dripping, vibrant saturated colors, cross-
 section view feel, appetizing food photography."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: '이 과일이 왜 맛있는지' 과학적/감성적 설득.
 당도, 식감, 재배 환경 등을 활용한 한 마디."
```

#### 섹션 5: 구성/스펙
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Flat lay arrangement on clean
 white surface, all items neatly displayed, product
 unboxing feel, organized composition."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 구성품과 스펙을 명확히 전달.
 '내가 정확히 무엇을 받는지' 안심시키는 한 마디."
```

#### 섹션 6: 산지 스토리
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Korean countryside orchard,
 golden sunlight through fruit trees, rustic wooden crate,
 harvest season atmosphere, traditional farm scenery."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 산지와 생산자에 대한 감성적 연결.
 '이 땅에서 이 사람이 정성껏 키웠다'는 느낌의 한 마디."
```

#### 섹션 7: 배송/보증
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Clean packaging scene with
 ice packs, cushioning material, styrofoam box, careful
 packaging process, fresh delivery concept."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 신선식품 배송 걱정 해소.
 '신선하게 안전하게 받을 수 있다'는 확신의 한 마디."
```

#### 섹션 8: 최종 CTA
```
이미지 프롬프트:
"Keep the product in the foreground exactly as is.
 Change the background to: Warm golden premium lighting,
 elegant dark or gradient background, call-to-action mood,
 urgency and desire, luxury gift feel."

카피 프롬프트: [공통 프롬프트] + 섹션 목적:
"이 섹션의 목적: 마지막 구매 유도. 긴박감 + 혜택 요약.
 '지금 안 사면 후회한다'는 행동 촉구의 한 마디."
```

### 공통 카피 프롬프트 템플릿
```
"당신은 5명의 전설적인 카피라이터입니다.

현재 작업 중인 섹션: [섹션 N: 섹션명]
이 섹션의 목적: [위 섹션별 목적]

제품 정보:
- 과일: {fruitType}
- 산지: {origin}
- 당도: {brix}Brix
- 특징: {features}
- 가격: {price}

5명 각각의 스타일로 이 섹션에 어울리는 카피를 1개씩 만들어주세요.

[카피라이터 페르소나]
1) Donald Miller 스타일: 고객이 주인공이 되는 스토리텔링
2) David Ogilvy 스타일: 구체적 수치/팩트로 신뢰
3) Eugene Schwartz 스타일: 긴박감과 욕구 자극
4) Gary Halbert 스타일: 친구처럼 툭 던지는 질문
5) Claude Hopkins 스타일: '왜 좋은지' 과학적 이유 하나

[필수 제약 조건]
1. 모든 카피는 공백 포함 25자 이내
2. 설명문이 아닌 즉시 감정을 자극하는 한 마디
3. 각 카피라이터의 고유한 접근법을 반드시 반영

응답은 다음 JSON 스키마를 따라주세요:
{
  'backgroundPrompt': '위에서 정의한 이미지 프롬프트',
  'copies': [
    { 'style': '카피라이터명 스타일', 'text': '카피 내용' },
    ...
  ]
}"
```

---

## 7. 사용자 입력 항목

### 필수 입력
| 필드 | 타입 | 예시 |
|------|------|------|
| 제품 이미지 | File | 사과 사진 1장 |
| 과일 종류 | Select | 사과, 배, 딸기, 감귤, 포도, 수박, 참외, 복숭아, 기타 |
| 산지/원산지 | Text | "경북 영동" |
| 당도 | Number | 16.5 (Brix) |
| 중량/구성 | Text | "3kg / 9~11과" |
| 가격 | Number | 29,900 |

### 선택 입력
| 필드 | 타입 | 예시 |
|------|------|------|
| 품종명 | Text | "홍로" |
| 등급 | Select | 특대/대/중 |
| 인증 | MultiSelect | GAP, 유기농, 친환경, HACCP |
| 생산자 | Text | "김영동 농부 (30년 경력)" |
| 배송 정보 | Text | "수확 후 24시간 이내 출고" |
| 프로모션 | Text | "3박스 이상 10% 할인" |
| 수확 시기 | Text | "2024년 9월 첫 수확" |
| 추가 설명 | Textarea | 자유 입력 |

---

## 8. 원본 앱에서 재사용/확장하는 부분

### 그대로 사용
| 원본 파일 | 용도 |
|-----------|------|
| `Button.tsx` | 범용 버튼 컴포넌트 |
| `ImageUploader.tsx` | 드래그앤드롭 이미지 업로드 |
| `fileToBase64()` | 이미지 리사이즈 + Base64 변환 |
| `retryOperation()` | API 재시도 로직 |
| `types.ts` 중 TextLayer, CopySuggestion, FONTS, COLORS | 에디터 타입/상수 |

### 확장 수정
| 원본 | 변경 내용 |
|------|----------|
| `Editor.tsx` | 섹션 네비게이션(이전/다음) 추가, 섹션 컨텍스트 표시 |
| `geminiService.ts` | 8개 섹션별 프롬프트 분리, API Key를 매개변수로 받도록 변경 (process.env.API_KEY → 사용자 입력 Key) |
| `App.tsx` | 홍보 랜딩 → API Key 입력 → 제품정보 → 생성 → 에디터 → 미리보기 → 다운로드 전체 흐름으로 재설계 |
| `types.ts` | Section 타입, ProductInfo 타입, AppState에 새 상태 추가 |

### 새로 만드는 컴포넌트
| 컴포넌트 | 용도 |
|----------|------|
| `LandingHero.tsx` | 홍보 랜딩 섹션 (다크테마, 네온, 파티클) |
| `ApiKeySetup.tsx` | API Key 입력 + 발급 가이드 모달 |
| `ProductInfoForm.tsx` | 과일 제품 정보 입력 폼 |
| `SectionEditor.tsx` | 섹션별 에디터 (Editor.tsx 래핑) |
| `SectionNavigator.tsx` | 섹션 간 이동 UI |
| `PreviewPage.tsx` | 8장 전체 미리보기 |
| `DownloadManager.tsx` | ZIP/개별 다운로드 |

---

# PART 2: Replit 개발 지시서

---

## 개발 지시서 개요

이 지시서는 "한이룸의 상세페이지 마법사 1.0" 소스를 기반으로
**과일 전문 AI 상세페이지 생성기**를 만드는 작업입니다.

### 기술 스택
- React 19 (ESM CDN import 방식 — 원본과 동일)
- TypeScript
- Tailwind CSS (CDN)
- Google Gemini API (gemini-3-flash-preview + gemini-2.5-flash-image)
- Lucide React (아이콘)
- 빌드 도구 없음 (원본과 동일한 CDN 기반)

### 핵심 원칙
```
1. 기존 시스템 완전 분리 — 기존 코드/로직/테이블 절대 수정 금지
   (예외: 좌측 메뉴 탭 링크 추가 + users 테이블 컬럼 2개 추가만 허용)
2. 독립 폴더 구조 — 모든 AI 관련 파일은 ai-studio 폴더에 격리
3. 독립 라우트 — 프론트 /ai-studio/*, 백엔드 /api/ai-studio/*
4. 사용자 API Key → 서버 DB 암호화 저장 → 프론트에서 Google 직접 호출
5. 세션/인증 미들웨어만 기존 시스템과 공유
6. 장애 격리 — AI 기능 오류가 기존 기능에 영향 없어야 함
```

---

## TASK 1: 홍보/랜딩 섹션 구현

### ⚠️ 사용자 강조 사항
```
"아주 세련되고 임팩트있는 AI 스러운 디자인으로 표시되어야 해!
그냥 대충 만들면 안돼."

→ 이 앱의 첫인상을 결정하는 가장 중요한 화면
→ "우와, 이거 뭔가 다르다" 느낌이 들어야 함
→ 퀄리티에 특별히 신경 쓸 것
```

### 요구사항
- 앱의 **첫 화면**으로 표시
- **다크 테마** (배경 #0a0a0f ~ #111827)
- **네온/글로우 효과** (보라+파랑+청록 그라디언트)
- **파티클 애니메이션** (배경에 떠다니는 빛 입자, CSS 또는 canvas)
- **타이핑 애니메이션** (히어로 헤드라인 텍스트가 한 글자씩 나타남)
- **세련되고 임팩트 있는 디자인** (대충 만들지 말 것!)

### 구성 요소
1. **히어로**: AI 아이콘 + 타이핑 헤드라인 + 서브카피 + 글로우 CTA 버튼
2. **핵심 가치 3카드**: 글래스모피즘 스타일, 호버시 글로우
3. **사용법 3단계**: 아이콘 + 프로그레스 라인 애니메이션
4. **비용 안내**: 무료 강조 + API Key 발급 가이드 링크
5. **최종 CTA**: "시작하기" 버튼

### 주요 텍스트
- 히어로: "상품 사진 1장이 완성된 상세페이지 8장이 됩니다"
- 서브: "5명의 전설적 AI 카피라이터가 당신의 상품을 팝니다"
- 3카드: "AI 배경 합성" / "AI 카피라이터" / "간편 편집"
- 비용: "완전 무료 — Google AI Studio Key만 있으면 됩니다"

---

## TASK 2: API Key 입력 + 발급 가이드 + 백엔드 API

### 프론트엔드 요구사항
- 입력 필드 + "저장 및 연결하기" 버튼
- 입력 시 `validateApiKey()` 로 실제 검증 (원본 함수 재사용)
- 검증 성공 → `POST /api/ai-studio/api-key`로 서버에 저장
- 페이지 로드 시 `GET /api/ai-studio/api-key`로 저장된 Key 조회
- Key 있으면 → 입력 화면 스킵, "Key가 연결되어 있습니다" + 마지막 4자리만 표시
- Key 없으면 → 입력 화면 표시
- "Key 변경" → 새 Key 입력 → 저장
- "Key 삭제" → `DELETE /api/ai-studio/api-key`
- "Key 없으신가요?" 클릭 → 발급 가이드 모달 표시
- 보안 안내: "키는 암호화되어 안전하게 저장됩니다. 본인만 사용 가능합니다."

### 백엔드 API (3개)

```javascript
// 1. Key 조회 — 본인 Key만 반환
router.get('/api/ai-studio/api-key', requireAuth, async (req, res) => {
  const userId = req.session.userId; // ⚠️ 반드시 세션에서만 추출
  const row = await db.query(
    'SELECT gemini_api_key, gemini_api_key_updated_at FROM users WHERE id = $1',
    [userId]
  );
  if (row.gemini_api_key) {
    const decryptedKey = decrypt(row.gemini_api_key, process.env.ENCRYPTION_SECRET);
    res.json({ 
      hasKey: true, 
      apiKey: decryptedKey,
      maskedKey: 'AIza...' + decryptedKey.slice(-4), // 마스킹 버전
      updatedAt: row.gemini_api_key_updated_at 
    });
  } else {
    res.json({ hasKey: false });
  }
});

// 2. Key 저장/업데이트 — 본인 행만 수정
router.post('/api/ai-studio/api-key', requireAuth, async (req, res) => {
  const userId = req.session.userId; // ⚠️ 반드시 세션에서만 추출
  const { apiKey } = req.body;
  const encryptedKey = encrypt(apiKey, process.env.ENCRYPTION_SECRET);
  await db.query(
    'UPDATE users SET gemini_api_key = $1, gemini_api_key_updated_at = NOW() WHERE id = $2',
    [encryptedKey, userId]
  );
  res.json({ success: true });
});

// 3. Key 삭제 — 본인 행만 수정
router.delete('/api/ai-studio/api-key', requireAuth, async (req, res) => {
  const userId = req.session.userId; // ⚠️ 반드시 세션에서만 추출
  await db.query(
    'UPDATE users SET gemini_api_key = NULL, gemini_api_key_updated_at = NULL WHERE id = $1',
    [userId]
  );
  res.json({ success: true });
});
```

### DB 변경
```sql
ALTER TABLE users ADD COLUMN gemini_api_key TEXT;
ALTER TABLE users ADD COLUMN gemini_api_key_updated_at TIMESTAMP;
```

### 암호화 (AES-256)
```javascript
const crypto = require('crypto');
const ALGORITHM = 'aes-256-cbc';

function encrypt(text, secret) {
  const iv = crypto.randomBytes(16);
  const key = crypto.scryptSync(secret, 'salt', 32);
  const cipher = crypto.createCipheriv(ALGORITHM, key, iv);
  let encrypted = cipher.update(text, 'utf8', 'hex');
  encrypted += cipher.final('hex');
  return iv.toString('hex') + ':' + encrypted;
}

function decrypt(encryptedText, secret) {
  const [ivHex, encrypted] = encryptedText.split(':');
  const iv = Buffer.from(ivHex, 'hex');
  const key = crypto.scryptSync(secret, 'salt', 32);
  const decipher = crypto.createDecipheriv(ALGORITHM, key, iv);
  let decrypted = decipher.update(encrypted, 'hex', 'utf8');
  decrypted += decipher.final('utf8');
  return decrypted;
}
```

### ⚠️ 보안 격리 핵심 규칙
```
1. 모든 API에서 user_id는 오직 req.session.userId에서만 추출
2. URL 파라미터나 body로 user_id를 받지 않음
3. 관리자도 다른 회원의 Key를 조회/사용할 수 없음
4. API Key는 반드시 AES-256으로 암호화 저장
5. 프론트엔드에 전달 시 마스킹 버전도 함께 전달 (UI 표시용)
```

### 관리자 vs 회원 차이점
```
관리자: 관리자 대시보드 > 좌측 탭 "AI 상세페이지"에서 접근
       → 동일한 UI, 동일한 API
       → 본인(관리자)의 Key만 저장/사용

회원:   마이페이지 > 좌측 탭 "AI 상세페이지"에서 접근
       → 동일한 UI, 동일한 API
       → 본인(해당 회원)의 Key만 저장/사용

기능 차이: 없음 (동일한 앱, 동일한 권한)
차이점: 접근 경로만 다름 (관리자 대시보드 vs 마이페이지)
```

---

## TASK 3: 제품 정보 입력 폼

### 요구사항
- 과일 특화 입력 폼
- 필수/선택 구분 명확히
- 깔끔한 UI (카드 스타일, 그룹핑)

### 필수 필드
- 과일 종류 (드롭다운: 사과, 배, 딸기, 감귤, 포도, 수박, 참외, 복숭아, 기타)
- 산지/원산지 (텍스트)
- 당도 Brix (숫자)
- 중량/구성 (텍스트)
- 가격 (숫자)
- 제품 이미지 (ImageUploader 재사용)
- 이미지 비율 선택 (원본 ratios 재사용)

### 선택 필드
- 품종명, 등급, 인증, 생산자, 배송정보, 프로모션, 수확시기, 추가설명
- 접이식(아코디언)으로 "선택 정보 입력 ▼" 클릭시 펼침

---

## TASK 4: AI 생성 로직 (geminiService 확장)

### ⚠️ 이미지/카피 생성 핵심 규칙
```
[이미지 생성]
- 모든 섹션 이미지 프롬프트에 "spacious composition, clean layout" 포함
- 사진 중심, 여백이 넉넉한 구도로 생성
- 같은 제품 사진 1장으로 섹션별 다른 배경 AI 합성
- 제품은 전경에 그대로 유지, 배경만 변경

[카피 생성]
- 5명 카피라이터를 특정 섹션에 고정하지 않음
- 5명 전원이 모든 섹션에 대해 각자 카피를 생성
- 각 섹션에서 사용자가 5개 중 선택
- 카피 길이: 공백 포함 25자 이내
```

### 요구사항
- 원본 `analyzeProductAndSuggest()`를 **8개 섹션 버전으로 확장**
- 각 섹션마다 다른 이미지 프롬프트 + 카피 프롬프트 사용
- **한 번에 8개 섹션 순차 생성** (병렬 X → Rate Limit 방지)

### 새 함수 구조
```typescript
// 섹션 정의
const SECTIONS = [
  { id: 'hero', name: '히어로 배너', imagePrompt: '...', copyContext: '...' },
  { id: 'problem', name: '문제 공감', imagePrompt: '...', copyContext: '...' },
  { id: 'social-proof', name: '사회적 증거', imagePrompt: '...', copyContext: '...' },
  { id: 'taste', name: '맛/품질 상세', imagePrompt: '...', copyContext: '...' },
  { id: 'spec', name: '구성/스펙', imagePrompt: '...', copyContext: '...' },
  { id: 'origin', name: '산지 스토리', imagePrompt: '...', copyContext: '...' },
  { id: 'shipping', name: '배송/보증', imagePrompt: '...', copyContext: '...' },
  { id: 'cta', name: '최종 CTA', imagePrompt: '...', copyContext: '...' },
];

// 각 섹션 프롬프트는 PART 1 섹션 6의 내용을 그대로 사용

interface ProductInfo {
  fruitType: string;
  origin: string;
  brix: number;
  weight: string;
  price: number;
  variety?: string;
  grade?: string;
  certifications?: string[];
  producer?: string;
  shipping?: string;
  promotion?: string;
  harvestDate?: string;
  additionalInfo?: string;
}

// 섹션별 생성 함수
async function generateSection(
  apiKey: string,
  base64Image: string,
  section: Section,
  productInfo: ProductInfo,
  aspectRatio: string
): Promise<SectionResult>

// 전체 8개 섹션 순차 생성
async function generateAllSections(
  apiKey: string,
  base64Image: string,
  productInfo: ProductInfo,
  aspectRatio: string,
  onProgress: (sectionIndex: number, status: string) => void
): Promise<SectionResult[]>
```

### API Key 전달 방식 변경
```
원본: process.env.API_KEY (AI Studio 환경변수)
변경: 함수 매개변수로 직접 전달 (서버 DB에서 조회한 Key를 프론트에서 받아서)
```

---

## TASK 5: 섹션별 에디터

### ⚠️ 핵심 협의 사항
```
사용자 원문: "이 앱은 히어로 섹션을 보면 각 카피를 사용자가 선택을 하고
크기도 바꾸고 색깔도 바꿀 수 있도록 하고 있어. 나는 이러한 구조로
각 단락(섹션)에도 고루 사용되도록 하면 좋을 것 같아."

→ 히어로 섹션의 카피 편집 기능을 8개 섹션 모두에 동일하게 적용
→ 5명 카피라이터가 각 섹션마다 전부 카피를 만들고, 사용자가 선택
→ 선택 후 크기/색깔/폰트/위치 자유 편집 (Editor.tsx 기능 그대로)
```

### 요구사항
- 원본 `Editor.tsx`의 모든 편집 기능을 유지
  - 카피 클릭 → 이미지 위에 텍스트 레이어 추가
  - 드래그 이동
  - 폰트 크기/색상/종류/정렬/볼드 변경
  - 텍스트 박스 너비 리사이즈
  - Canvas 기반 이미지 다운로드
- **추가**: 섹션 네비게이션 (이전/다음 버튼, 현재 섹션 표시)
- **추가**: 상단에 "섹션 3/8: 사회적 증거" 같은 진행 표시
- **추가**: 섹션 목록 사이드바 (클릭으로 원하는 섹션 이동)

### 에디터 레이아웃
```
┌─ 상단 바 ─────────────────────────────────────┐
│ ← 이전  [● ● ● ○ ○ ○ ○ ○] 섹션 4/8  다음 → │
│         "맛/품질 상세"                         │
└──────────────────────────────────────────────┘
┌─ 왼쪽 패널 ────────┐  ┌─ 캔버스 ─────────────┐
│ 📝 AI 카피 추천     │  │                     │
│                    │  │  [AI 생성 이미지]     │
│ ┌ Donald Miller ─┐ │  │                     │
│ │ "카피 내용"     │ │  │   "선택한 카피"      │
│ └───────────────┘ │  │                     │
│ ┌ David Ogilvy ─┐  │  │                     │
│ │ "카피 내용"     │ │  │                     │
│ └───────────────┘ │  │                     │
│ ... (5개)         │  │                     │
│                    │  │                     │
│ 🎨 편집 도구       │  │                     │
│ · 폰트 크기        │  │                     │
│ · 색상 선택        │  │                     │
│ · 폰트 종류        │  │                     │
│ · 정렬/볼드        │  │                     │
│                    │  │                     │
│ [전체 미리보기]     │  │                     │
└────────────────────┘  └─────────────────────┘
```

---

## TASK 6: 전체 미리보기 + 다운로드

### 요구사항
- 8개 섹션 이미지를 세로로 나열하여 전체 상세페이지 미리보기
- 각 섹션 클릭 → 해당 섹션 에디터로 이동 (수정 가능)
- 다운로드 옵션:
  - 전체 다운로드 (ZIP 파일 — JSZip 라이브러리 사용)
  - 개별 다운로드 (섹션별 JPG)
- 각 이미지는 Canvas에서 텍스트 레이어가 합성된 최종본

---

## TASK 7: 상태 관리 (AppState 확장)

### 원본 AppState
```typescript
enum AppState { UPLOAD, PROCESSING, EDITOR }
```

### 확장 AppState
```typescript
enum AppState {
  LANDING = 'LANDING',           // 홍보 랜딩 섹션
  API_KEY_SETUP = 'API_KEY_SETUP', // API Key 입력
  PRODUCT_INFO = 'PRODUCT_INFO',   // 제품 정보 입력
  GENERATING = 'GENERATING',       // AI 8개 섹션 생성 중
  SECTION_EDITOR = 'SECTION_EDITOR', // 섹션별 에디터
  PREVIEW = 'PREVIEW',             // 전체 미리보기
}
```

---

## 파일 구조 (⚠️ 반드시 독립 폴더에 격리)

```
[기존 탑셀러 프로젝트]
│
├── client/src/
│   ├── pages/
│   │   ├── orders/           ← 기존 (수정 금지)
│   │   ├── products/         ← 기존 (수정 금지)
│   │   ├── settlements/      ← 기존 (수정 금지)
│   │   ├── members/          ← 기존 (수정 금지)
│   │   │
│   │   └── ai-studio/        ★ 신규 독립 폴더 (여기에만 작업)
│   │       ├── App.tsx                    # AI 상세페이지 메인
│   │       ├── types.ts                   # 타입 정의
│   │       ├── components/
│   │       │   ├── LandingHero.tsx        # 홍보 랜딩
│   │       │   ├── ApiKeySetup.tsx        # API Key 입력/가이드
│   │       │   ├── ProductInfoForm.tsx    # 제품 정보 입력
│   │       │   ├── GeneratingProgress.tsx # 생성 진행 화면
│   │       │   ├── SectionEditor.tsx      # 섹션별 에디터
│   │       │   ├── SectionNavigator.tsx   # 섹션 이동 UI
│   │       │   ├── PreviewPage.tsx        # 전체 미리보기
│   │       │   ├── DownloadManager.tsx    # 다운로드 UI
│   │       │   ├── ImageUploader.tsx      # (원본 참고 신규 작성)
│   │       │   ├── Editor.tsx             # (원본 참고 신규 작성)
│   │       │   └── Button.tsx             # (원본 참고 신규 작성)
│   │       ├── services/
│   │       │   ├── geminiService.ts       # Gemini API 호출
│   │       │   ├── apiKeyService.ts       # Key CRUD (서버 통신)
│   │       │   └── sections.ts            # 8개 섹션 정의
│   │       └── utils/
│   │           └── download.ts            # ZIP/이미지 유틸
│   │
│   └── components/
│       └── Sidebar.tsx        ← 여기에 "AI 상세페이지" 탭 링크만 추가
│
├── server/
│   ├── routes/
│   │   ├── orders.ts          ← 기존 (수정 금지)
│   │   ├── products.ts        ← 기존 (수정 금지)
│   │   │
│   │   └── ai-studio.ts      ★ 신규 독립 파일 (API Key CRUD 3개)
│   │
│   └── utils/
│       └── encryption.ts      ★ 신규 (AES-256 암호화/복호화)
│
└── 기존 시스템 파일들...       ← 전부 수정 금지

※ 원본 앱(Google AI Studio) 소스는 /reference 폴더에 복사해두고 참고만 할 것
※ 원본 파일을 직접 import 하지 말고, ai-studio 폴더 내에 새로 작성
```

---

## 개발 우선순위

```
1단계: 기본 골격
  □ AppState 확장 + 상태 전환 흐름
  □ LandingHero (다크테마, 네온, 파티클, 타이핑)
  □ ApiKeySetup (입력, 검증, 서버 DB 저장)
  □ ProductInfoForm (필수/선택 입력)

2단계: 핵심 AI 기능
  □ sections.ts (8개 섹션 프롬프트 정의)
  □ geminiService.ts 확장 (섹션별 생성)
  □ GeneratingProgress (진행 UI)

3단계: 에디터 + 미리보기
  □ SectionEditor (Editor.tsx 확장)
  □ SectionNavigator (섹션 이동)
  □ PreviewPage (8장 나열)
  □ DownloadManager (ZIP 다운로드)

4단계: 폴리싱
  □ 반응형 디자인 (모바일 대응)
  □ 에러 핸들링 강화
  □ 로딩 애니메이션 다듬기
  □ API Key 가이드 스크린샷 추가
```

---

## 원본 소스 파일 참조

개발 시 다음 원본 파일을 참고하세요:

| 파일 | 참고 포인트 |
|------|-----------|
| `App.tsx` | 상태 관리 패턴, 에러 핸들링, 비율 선택 UI |
| `Editor.tsx` | 텍스트 레이어 시스템, 드래그, Canvas 다운로드 전체 |
| `geminiService.ts` | API 호출 패턴, 프롬프트 구조, JSON 스키마 응답 |
| `ImageUploader.tsx` | 드래그앤드롭 UI |
| `Button.tsx` | 버튼 variant/size 시스템 |
| `types.ts` | TextLayer, CopySuggestion, 폰트/색상 상수 |

원본 소스는 이 프로젝트의 `/reference` 폴더에 복사되어 있습니다.
