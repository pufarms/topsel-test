[Phase 2 보완 — 외주상품 미배정 주문 자동 주문조정 처리]

배분 확정 후 주문 배정(assign-orders) 시, 배정되지 못한 주문(재고 부족분)을
자동으로 기존 주문조정(직권취소) 상태로 전환하는 기능을 추가합니다.

⚠️ 중요 원칙:
- 기존 주문조정(직권취소) 프로세스를 100% 그대로 활용합니다.
- 기존 admin-cancel 페이지, 주문조정 API, 상태 전환 로직은 수정하지 마세요.
- assign-orders API에 미배정 주문 처리 로직만 "추가"합니다.
- 작업 진행 상황 설명과 작업 결과는 항상 한글로 보여주세요.

[배경 — 비즈니스 시나리오]

예시:
1. 특정 상품 주문 100박스 발생 → 배분 생성 (totalQuantity: 100)
2. 업체 응답: A업체 60박스, B업체 20박스 = 총 80박스만 가능
3. 배분 확정: allocatedQuantity = 80, 자체발송 = 0
4. 주문 배정 실행:
   - 80개 주문 → 업체에 배정 (vendorId, fulfillmentType='vendor')
   - 나머지 20개 주문 → 재고 부족으로 처리 불가
   → 이 20개를 자동으로 "주문조정" 상태로 전환해야 함

[1단계: assign-orders API 보완]

POST /api/admin/allocations/:allocationId/assign-orders 의 기존 로직 끝에
미배정 주문 처리를 추가합니다.

기존 동작 (수정하지 마세요):
- 확정된 배분에 따라 주문에 vendorId, fulfillmentType, vendorPrice 배정
- 자체발송분은 fulfillmentType='self' 유지

추가할 동작:
1. 배정 완료 후, 해당 상품코드+날짜의 미배정 주문을 조회합니다.
   - vendorId IS NULL
   - fulfillmentType = 'self' (기본값, 아직 미배정)
   - 해당 allocationDate 범위 내 주문

2. 미배정 주문이 있으면:
   - 기존 주문조정과 동일한 방식으로 상태를 변경합니다.
   - 현재 시스템에서 주문조정 상태가 어떤 값인지 확인하세요.
     (예: status = '주문조정', status = 'cancelled', 또는 숫자 코드 등)
   - 기존 주문조정 로직에서 사용하는 상태값과 동일하게 적용하세요.
   - cancelReason 또는 memo에 "외주상품 재고부족 - 자동 주문조정" 기록

3. order_allocations도 업데이트:
   - unallocatedQuantity = 미배정 주문 수
   - 미배정 주문 수를 응답에 포함

4. 응답에 미배정(주문조정) 정보를 추가합니다:
{
  "allocationId": 1,
  "assignedOrders": 80,
  "adjustedOrders": 20,  // 주문조정 처리된 수
  "adjustReason": "외주상품 재고부족",
  "byVendor": [...],
  "adjustedOrderIds": [101, 102, ...] // 조정된 주문 ID 목록
}

[2단계: 배분 확정 화면에 주문조정 수량 표시]

관리자 배분 페이지(allocations)에서:
- 배분 현황 테이블에 "주문조정" 컬럼 추가
  (unallocatedQuantity 또는 adjustedQuantity 표시)
- 주문 배정 후 결과에서 "N건 주문조정 처리됨" 메시지 표시

[3단계: admin-cancel 페이지 연동 확인]

기존 admin-cancel 페이지에서:
- 자동 주문조정된 주문이 정상적으로 조회되는지 확인
- 기존 주문조정 주문과 동일하게 표시되는지 확인
- 별도 수정은 하지 않되, 정상 표시 여부만 확인하고 보고해 주세요

[4단계: 배분 페이지에 "주문 배정 + 미배정분 주문조정" 옵션 추가]

현재 "주문 배정" 버튼을 클릭할 때, 확인 다이얼로그에 다음 내용을 표시합니다:

"배정 가능: {allocatedQuantity}건
 미배정(주문조정 예정): {unallocatedQuantity}건
 
 배정을 진행하면 미배정 주문은 자동으로 주문조정 처리됩니다.
 계속하시겠습니까?"

관리자가 확인을 눌러야 배정 + 주문조정이 동시에 진행됩니다.

[완료 확인]
- 배정 후 미배정 주문이 자동으로 주문조정 상태로 전환되는지 확인
- admin-cancel 페이지에서 조정된 주문이 정상 조회되는지 확인
- order_allocations에 미배정 수량이 정확히 기록되는지 확인
- 기존 주문조정 프로세스(자체 상품 직권취소)에 영향이 없는지 확인
- 결과를 한글로 보고해 주세요