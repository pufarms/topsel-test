# 탑셀러 회원정보 페이지 — 회원명 추가 및 수정 기능 지시서

## ⚠️ 절대 원칙
- 기존 코드, DB 구조, UI, 기능은 절대 수정하지 말 것
- 아래 지정된 부분에만 추가/수정 허용
- TypeScript 타입 오류 없도록 작성
- 모든 에러는 try-catch로 처리
- 완료 후 추가/수정된 파일 목록과 변경 내용을 한국어로 요약

---

## 작업 내용

회원정보 페이지(회원 대시보드 > 회원정보 탭)의
기본 정보 섹션에서 비밀번호 변경 아래에 회원명 수정 기능을 추가해줘.

---

## PART 1 — 사업자 정보 섹션에 회원명 표시 추가

사업자 정보 섹션(읽기 전용)의 기존 항목들 맨 위에 회원명 항목을 추가해줘.

**표시 내용:**
- 항목명: 회원명 (입금자 확인용)
- 값: 현재 로그인한 회원의 회원명 표시
- 아래 안내 문구 3줄 표시:
  1. ⚠️ 예치금 입금 시 반드시 이 회원명으로 입금해야 자동 매칭됩니다.
  2. 사업자 대표자명과 다를 수 있습니다.
  3. 회원명 변경이 필요한 경우 기본 정보 섹션에서 수정하세요.

---

## PART 2 — 기본 정보 섹션에 회원명 수정 UI 추가

기본 정보 섹션의 비밀번호 변경 행 아래, [변경사항 저장] 버튼 위에 추가해줘.

**UI 구성:**
- 라벨: 회원명 (입금자 확인용) *필수
- 현재 회원명 입력창 (수정 가능)
- [중복확인] 버튼 (입력창 옆)
- 조건 안내 문구: "한글 6자 이내 · 입금 시 자동매칭에 사용됩니다"
- 중복확인 필수 후 [변경사항 저장] 가능하도록 처리

**유효성 검사:**
- 한글만 입력 가능 (6자 이내)
- 빈값 불가
- 중복확인 미완료 시 저장 버튼 클릭해도 "회원명 중복확인을 완료해 주세요." 알림

**중복확인 동작:**
- [중복확인] 버튼 클릭 시 GET /api/auth/check-username?username=xxx 호출
- 사용 가능: 입력창 아래 초록색 "✓ 사용 가능한 회원명입니다." 표시
- 중복: 빨간색 "✗ 이미 사용 중인 회원명입니다." 표시
- 현재 본인 회원명과 동일한 경우: "현재 사용 중인 회원명입니다." 표시 (저장 가능)
- 회원명 입력값 변경 시 중복확인 상태 초기화

---

## PART 3 — 회원명 중복확인 API 추가

기존 routes.ts에 아래 API를 추가해줘. 기존 코드는 절대 수정하지 말 것.

```
GET /api/auth/check-username?username=xxx
```
- 로그인 세션 필요 (회원만 접근 가능)
- members 테이블에서 해당 username 존재 여부 확인
- 본인 username과 동일하면 { available: true, self: true }
- 중복이면 { available: false }
- 사용 가능하면 { available: true, self: false }

---

## PART 4 — 회원명 저장 API 연동

기존 [변경사항 저장] 버튼에 회원명 저장 로직을 추가해줘.

- 기존 담당자 정보 저장 API에 username 필드를 추가로 전송
- 서버에서 members 테이블의 username 컬럼 업데이트
- 중복확인 완료된 경우에만 저장 요청
- 저장 성공 시 사업자 정보 섹션의 회원명도 즉시 업데이트

---

## 완료 후 보고사항
- 추가/수정된 파일 목록
- 각 파일의 변경 내용 요약
- 테스트 방법
- 모두 한국어로 작성
