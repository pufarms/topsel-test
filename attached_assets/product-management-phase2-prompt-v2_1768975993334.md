# 상품관리 시스템 구현 요청 (2차)

## 📋 개요

탑셀러 B2B 과일 도매 플랫폼의 **상품관리 시스템 2차**를 구현해주세요.
1차에서 만든 메뉴 구조에 이어서, 나머지 3개 페이지를 구현합니다.

---

## 🗂️ 2차 구현 범위

```
상품관리
├── 카테고리 관리              ✅ 1차 완료
├── 상품등록 (공급가 계산)      ✅ 1차 완료
├── 차주 예상공급가 상품        ← 2차 구현
├── 현재 공급가 상품            ← 2차 구현
└── 공급 중지 상품              ← 2차 구현
```

---

## 🎨 UI 스타일 참조 (중요!)

2차 페이지들의 테이블 UI는 **1차에서 적용한 UI 개선 사항**을 동일하게 적용해주세요.

### 테이블 공통 스타일

| 항목 | 적용 내용 |
|------|----------|
| **가로 스크롤** | 페이지 너비 초과 시 하단에 스크롤바 |
| **세로 스크롤** | 15행 초과 시 우측에 스크롤바 |
| **체크박스 컬럼 고정** | 가로 스크롤 시에도 맨 앞 체크박스 컬럼 고정 (`position: sticky; left: 0`) |
| **선택 행 하이라이트** | 체크된 행은 파란색 배경 (`bg-blue-100`) |
| **엑셀 스타일 셀** | 입력 필드 테두리 없음, 셀 테두리(연한 선)로만 구분 |
| **컬럼 최소 너비** | 각 컬럼별 min-width 설정하여 값이 잘리지 않도록 |

### CSS 참조

```css
/* 테이블 컨테이너 - 가로/세로 스크롤 */
.table-container {
  width: 100%;
  max-height: calc(40px + (40px * 15));  /* 헤더 + 15행 */
  overflow-x: auto;
  overflow-y: auto;
}

/* 체크박스 컬럼 고정 */
.table-checkbox-cell {
  position: sticky;
  left: 0;
  z-index: 10;
  background-color: #ffffff;
  border-right: 2px solid #e5e7eb;
}

/* 체크된 행 하이라이트 */
.row-selected {
  background-color: #DBEAFE !important;
}

/* 엑셀 스타일 셀 */
.product-table td {
  padding: 4px 8px;
  border: 1px solid #e5e7eb;
  white-space: nowrap;
  font-size: 13px;
}
```

---

## 🔗 1차 → 2차 데이터 연동 (매우 중요!)

### 데이터 흐름도

```
[상품등록(공급가 계산)]                    [차주 예상공급가 상품]              [현재 공급가 상품]
 product_registrations                    next_week_products                current_products
        │                                        │                                │
        │  "차주 예상공급가로 전송" 클릭           │                                │
        │ ─────────────────────────────────→     │                                │
        │                                        │  "현재 공급가 적용" 클릭         │
        │                                        │ ─────────────────────────────→ │
        │                                        │                                │
```

### 1차 → 2차 필드 매핑 (상품등록 → 차주 예상공급가)

"상품등록(공급가 계산)"에서 "차주 예상공급가로 전송" 클릭 시:

| 1차: product_registrations | → | 2차: next_week_products |
|---------------------------|---|------------------------|
| productCode | → | productCode |
| productName | → | productName |
| categoryLarge | → | categoryLarge |
| categoryMedium | → | categoryMedium |
| categorySmall | → | categorySmall |
| weight | → | weight |
| **startPrice** (자동계산됨) | → | **startPrice** |
| **drivingPrice** (자동계산됨) | → | **drivingPrice** |
| **topPrice** (자동계산됨) | → | **topPrice** |
| status | → | supplyStatus ('active' → 'supply') |

### 2차 내부 필드 매핑 (차주 예상공급가 → 현재 공급가)

"차주 예상공급가"에서 "현재 공급가 적용" 클릭 시:

| 2차: next_week_products | → | 2차: current_products |
|------------------------|---|----------------------|
| productCode | → | productCode |
| productName | → | productName |
| categoryLarge | → | categoryLarge |
| categoryMedium | → | categoryMedium |
| categorySmall | → | categorySmall |
| weight | → | weight |
| **startPrice** | → | **startPrice** |
| **drivingPrice** | → | **drivingPrice** |
| **topPrice** | → | **topPrice** |
| supplyStatus | → | supplyStatus |
| - | → | appliedAt (현재 시간) |

### 등급별 공급가 계산 (1차에서 계산됨)

1차 "상품등록(공급가 계산)"에서 다음과 같이 계산된 값이 2차로 전달됩니다:

```javascript
// 1차에서 계산된 값들
상품 총원가 = 개별단가 + 박스비 + 자재비 + 아웃박스 + 보자기 + 작업비 + 택배비

// 이 3개 값이 2차로 전달됨
startPrice = Math.round(상품 총원가 × (1 + Start마진율/100))
drivingPrice = Math.round(상품 총원가 × (1 + Driving마진율/100))
topPrice = Math.round(상품 총원가 × (1 + Top마진율/100))
```

### 전송 시 동작 규칙

**"차주 예상공급가로 전송" 시:**
1. 상품코드가 이미 존재하면 → **가격 정보 업데이트**
2. 상품코드가 없으면 → **신규 추가** (알림 표시)
3. 전송하지 않은 기존 상품 → **그대로 유지**

**"현재 공급가 적용" 시:**
1. 상품코드가 이미 존재하면 → **가격 정보 업데이트**
2. 상품코드가 없으면 → **신규 추가** (알림 표시)
3. 적용하지 않은 기존 상품 → **그대로 유지**

---

## 🔔 알림 시스템 (중요!)

모든 주요 동작에 대해 알림을 표시해야 합니다.

### 알림 종류

| 상황 | 타입 | 색상 | 메시지 |
|------|------|------|--------|
| **공급가 없음** | error | 🔴 빨간색 | "상품코드 [XXX]의 공급가가 없습니다. 마진율을 입력해주세요." |
| **신규 상품 추가** | info | 🔵 파란색 | "신규 상품 N개가 추가됩니다." |
| **전송/적용 성공** | success | 🟢 초록색 | "N개 상품이 전송/적용되었습니다." |
| **공급중지 완료** | success | 🟢 초록색 | "N개 상품이 공급 중지되었습니다." |
| **공급재개 완료** | success | 🟢 초록색 | "N개 상품의 공급이 재개되었습니다." |
| **삭제 완료** | success | 🟢 초록색 | "N개 상품이 삭제되었습니다." |

### 알림 UI 예시

```jsx
// 에러 알림 (공급가 없음)
<Alert type="error">
  <AlertTitle>전송 실패</AlertTitle>
  <AlertDescription>
    상품코드 [A001]의 공급가가 없습니다. 마진율을 입력해주세요.
  </AlertDescription>
  <AlertDetails>
    공급가 없는 상품 목록:
    - A001 (부사사과 3kg)
    - B002 (신고배 5kg)
  </AlertDetails>
</Alert>

// 확인 모달 (신규 상품)
<ConfirmModal>
  <ModalTitle>신규 상품 추가</ModalTitle>
  <ModalDescription>
    신규 상품 3개가 추가됩니다.
  </ModalDescription>
  <ModalDetails>
    - C001 (거봉포도 2kg)
    - C002 (샤인머스캣 1kg)
    - C003 (캠벨포도 4kg)
  </ModalDetails>
  <ModalActions>
    <Button variant="outline">취소</Button>
    <Button variant="primary">확인</Button>
  </ModalActions>
</ConfirmModal>

// 성공 알림
<Alert type="success">
  <AlertTitle>전송 완료</AlertTitle>
  <AlertDescription>
    15개 상품이 차주 예상공급가로 전송되었습니다.
  </AlertDescription>
</Alert>
```

---

## ⚠️ 중요: 회원용 기능

"차주 예상공급가 상품"과 "현재 공급가 상품"은 **회원도 볼 수 있음**

### 관리자 vs 회원 차이점

| 구분 | 관리자 | 회원 |
|------|--------|------|
| **가격 표시** | 모든 등급 (Start/Driving/Top) | 자신의 등급 가격만 |
| **다운로드** | 모든 등급 선택 가능 | 자신의 등급 가격으로 자동 |
| **수정 기능** | 가능 | 불가 |
| **공급상태 변경** | 가능 | 불가 |

### 회원 등급별 가격 적용

| 회원 등급 | 표시되는 공급가 |
|----------|---------------|
| Top회원 | Top회원 공급가 |
| Driving회원 | Driving회원 공급가 |
| Start회원 | Start회원 공급가 |
| 준회원 | Start회원 공급가 (동일) |
| 비로그인 | 가격 비공개 ("로그인 후 확인") |

---

# 3️⃣ 차주 예상공급가 상품 페이지

## 페이지 목적

- "상품등록(공급가 계산)"에서 전송받은 **다음 주 적용 예정 가격** 표시
- 회원들이 미리 다음 주 가격을 확인하고 다운로드 가능
- 관리자가 "현재 공급가 적용" 버튼으로 실제 가격 반영

---

## 페이지 레이아웃

### 관리자용

```
┌──────────────────────────────────────────────────────────────────────────┐
│ 차주 예상공급가 상품                                                      │
│ 다음 주 적용 예정 공급가입니다.                                            │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 📅 차주 적용 기간: 2025.01.27(월) ~ 2025.01.31(금)                    ││
│ │    (출고일 기준 적용)                                                  ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                         │
│ │  📦 전체    │ │ 🟢 공급     │ │ 🟡 공급예정  │                         │
│ │    87      │ │    75      │ │    12      │                         │
│ └─────────────┘ └─────────────┘ └─────────────┘                         │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 검색 필터                                                               │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 대분류: [전체▼] 중분류: [전체▼] 소분류: [전체▼] 중량: [____]           ││
│ │ 상품코드: [________] 상품명: [________] 공급상태: [전체▼]              ││
│ │                                              [검색] [초기화]          ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│ [선택 항목 현재 공급가 적용] [전체 현재 공급가 적용] [엑셀 다운로드]         │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 상품 테이블 (UI 스타일 참조: 체크박스 고정, 선택 행 하이라이트, 스크롤)    │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ □ │대분류│중분류│소분류│중량 │상품코드│상품명│Start가│Driving가│Top가│상태││
│ │ □ │과일 │사과 │부사 │5.0 │A001  │부사5kg│14,100│13,513 │12,925│공급 ││
│ │ □ │과일 │배  │신고 │3.0 │B001  │신고3kg│18,240│17,500 │16,800│공급 ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

### 회원용

```
┌──────────────────────────────────────────────────────────────────────────┐
│ 차주 예상공급가 상품                                                      │
│ 다음 주 적용 예정 공급가입니다.                                            │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 📅 차주 적용 기간: 2025.01.27(월) ~ 2025.01.31(금)                    ││
│ │    (출고일 기준 적용)                                                  ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 검색 필터                                                               │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 대분류: [전체▼] 중분류: [전체▼] 소분류: [전체▼] 중량: [____]           ││
│ │ 상품코드: [________] 상품명: [________]        [검색] [초기화]         ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│                                                        [엑셀 다운로드]    │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 상품 테이블 (회원 등급에 맞는 공급가만 표시)                              │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 대분류 │ 중분류 │ 소분류 │ 중량 │ 상품코드 │ 상품명  │ 공급가        ││
│ │ 과일  │ 사과  │ 부사  │ 5.0 │ A001   │ 부사5kg │ 14,100원      ││
│ │ 과일  │ 배   │ 신고  │ 3.0 │ B001   │ 신고3kg │ 18,240원      ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

---

## 테이블 컬럼 구조

### 관리자용 (11개 컬럼)

| 순번 | 컬럼명 | 최소 너비 | 설명 |
|------|--------|----------|------|
| 1 | **체크** | 40px | 선택용 체크박스 (고정) |
| 2 | **대분류** | 80px | 카테고리 |
| 3 | **중분류** | 80px | 카테고리 |
| 4 | **소분류** | 80px | 카테고리 |
| 5 | **중량(수량)** | 60px | 숫자, 소수점 1자리 |
| 6 | **상품코드** | 100px | 고유값 |
| 7 | **상품명** | 120px | 상품 이름 |
| 8 | **Start회원 공급가** | 100px | 등급별 가격 |
| 9 | **Driving회원 공급가** | 100px | 등급별 가격 |
| 10 | **Top회원 공급가** | 100px | 등급별 가격 |
| 11 | **공급상태** | 80px | 공급 / 공급예정 |

### 회원용 (7개 컬럼)

| 순번 | 컬럼명 | 설명 |
|------|--------|------|
| 1 | **대분류** | 카테고리 |
| 2 | **중분류** | 카테고리 |
| 3 | **소분류** | 카테고리 |
| 4 | **중량(수량)** | 숫자, 소수점 1자리 |
| 5 | **상품코드** | 고유값 |
| 6 | **상품명** | 상품 이름 |
| 7 | **공급가** | 자신의 등급에 맞는 가격만 표시 |

---

## 차주 적용 기간 자동 계산

```javascript
// 현재 날짜 기준으로 "다음 주 월요일 ~ 금요일" 자동 계산
function getNextWeekPeriod() {
  const today = new Date();
  const dayOfWeek = today.getDay(); // 0(일) ~ 6(토)
  
  // 다음 주 월요일 계산
  const daysUntilNextMonday = (8 - dayOfWeek) % 7 || 7;
  const nextMonday = new Date(today);
  nextMonday.setDate(today.getDate() + daysUntilNextMonday);
  
  // 다음 주 금요일 계산
  const nextFriday = new Date(nextMonday);
  nextFriday.setDate(nextMonday.getDate() + 4);
  
  return {
    start: nextMonday,  // 2025.01.27(월)
    end: nextFriday     // 2025.01.31(금)
  };
}

// 표시 형식: "2025.01.27(월) ~ 2025.01.31(금)"
```

---

## 공급상태 값

| 값 | 설명 | 표시 색상 |
|----|------|----------|
| **공급** | 정상 공급 중 | 🟢 녹색 |
| **공급예정** | 공급 중지 상태 (재개 대기) | 🟡 노란색 |

---

## 주요 기능

### 1) "현재 공급가 적용" 버튼 (관리자 전용)

**선택 항목 적용**
1. 체크박스로 상품 선택
2. [선택 항목 현재 공급가 적용] 클릭
3. 확인 모달: "선택한 N개 상품을 현재 공급가로 적용하시겠습니까?"
4. 신규 상품이 있으면 → ℹ️ 알림: "신규 상품 N개가 추가됩니다."
5. 확인 시 → "현재 공급가 상품" 테이블에 반영
6. ✅ 알림: "N개 상품이 현재 공급가로 적용되었습니다."

**전체 적용**
1. [전체 현재 공급가 적용] 클릭
2. 확인 모달: "전체 N개 상품을 현재 공급가로 적용하시겠습니까?"
3. 신규 상품이 있으면 → ℹ️ 알림: "신규 상품 N개가 추가됩니다."
4. 확인 시 → 모든 상품이 "현재 공급가 상품"에 반영
5. ✅ 알림: "N개 상품이 현재 공급가로 적용되었습니다."

**적용 시 동작**
- 기존 상품 (상품코드 일치): **가격 업데이트**
- 신규 상품: **새로 추가**
- 나머지 기존 상품: **변경 없이 유지**

### 2) 엑셀 다운로드

**관리자**
- 모든 등급 가격 포함
- 파일명: `차주_예상공급가_2025.01.27-01.31.xlsx`

**회원**
- 자신의 등급 가격만 포함
- 상단에 적용 기간 표시: "차주 적용 기간: 2025.01.27(월) ~ 2025.01.31(금)"
- 파일명: `차주_예상공급가_2025.01.27-01.31.xlsx`

### 다운로드 파일 구조 (회원용)
```
┌─────────────────────────────────────────────────────────┐
│ 차주 예상공급가                                          │
│ 적용 기간: 2025.01.27(월) ~ 2025.01.31(금) (출고일 기준)  │
├─────────────────────────────────────────────────────────┤
│ 대분류 │ 중분류 │ 소분류 │ 중량 │ 상품코드 │ 상품명 │ 공급가 │
│ 과일  │ 사과  │ 부사  │ 5.0 │ A001   │ 부사5kg│ 14,100│
│ ...                                                    │
└─────────────────────────────────────────────────────────┘
```

---

## 데이터 스키마 (next_week_products 테이블)

```typescript
{
  id: number;
  productCode: string;              // 상품코드 (unique)
  productName: string;              // 상품명
  categoryLarge: string | null;     // 대분류
  categoryMedium: string | null;    // 중분류
  categorySmall: string | null;     // 소분류
  weight: number;                   // 중량(수량) - 숫자, 소수점 1자리
  
  // 등급별 공급가
  startPrice: number;               // Start회원 공급가
  drivingPrice: number;             // Driving회원 공급가
  topPrice: number;                 // Top회원 공급가
  
  // 상태
  supplyStatus: 'supply' | 'scheduled';  // 공급 / 공급예정
  
  // 적용 기간
  effectiveFrom: Date;              // 적용 시작일 (다음주 월요일)
  effectiveTo: Date;                // 적용 종료일 (다음주 금요일)
  
  createdAt: Date;
  updatedAt: Date;
}
```

---

# 4️⃣ 현재 공급가 상품 페이지

## 페이지 목적

- **실제 정산에 사용되는 가격**
- 주문 정산 시 이 테이블의 공급가 기준으로 계산
- "차주 예상공급가"에서 "현재 공급가 적용"한 상품들

---

## 페이지 레이아웃

### 관리자용

```
┌──────────────────────────────────────────────────────────────────────────┐
│ 현재 공급가 상품                                                          │
│ 현재 적용 중인 공급가입니다. 주문 정산 시 이 가격이 적용됩니다.              │
├──────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐                         │
│ │  📦 전체    │ │ 🟢 공급     │ │ 🟡 공급예정  │                         │
│ │    87      │ │    75      │ │    12      │                         │
│ └─────────────┘ └─────────────┘ └─────────────┘                         │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 검색 필터                                                               │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 대분류: [전체▼] 중분류: [전체▼] 소분류: [전체▼] 중량: [____]           ││
│ │ 상품코드: [________] 상품명: [________] 공급상태: [전체▼]              ││
│ │                                              [검색] [초기화]          ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│ [선택 공급중지] [엑셀 다운로드]                                            │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 상품 테이블 (UI 스타일 참조: 체크박스 고정, 선택 행 하이라이트, 스크롤)    │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ □ │대분류│중분류│소분류│중량 │상품코드│상품명│Start가│Driving가│Top가│상태││
│ │ □ │과일 │사과 │부사 │5.0 │A001  │부사5kg│14,100│13,513 │12,925│공급 ││
│ │ □ │과일 │배  │신고 │3.0 │B001  │신고3kg│18,240│17,500 │16,800│공급 ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

### 회원용

- "차주 예상공급가 상품" 회원용과 동일한 구조
- 자신의 등급 공급가만 표시
- 다운로드 가능

---

## 테이블 컬럼 구조

"차주 예상공급가 상품"과 **동일한 11개 컬럼** (관리자용)
회원용은 7개 컬럼 (공급가 1개만)

---

## 주요 기능

### 1) 공급중지 처리 (관리자 전용)

1. 체크박스로 상품 선택
2. [선택 공급중지] 클릭
3. 공급중지 사유 입력 모달:
   ```
   ┌─────────────────────────────────────┐
   │ 공급 중지 설정                       │
   ├─────────────────────────────────────┤
   │ 선택한 N개 상품을 공급 중지합니다.    │
   │                                     │
   │ 중지 사유: [__________________]     │
   │ (예: 시즌 종료, 품질 이슈, 재고 소진) │
   │                                     │
   │              [취소] [공급 중지]      │
   └─────────────────────────────────────┘
   ```
4. 확인 시:
   - 해당 상품 상태 → 'scheduled' (공급예정)
   - "공급 중지 상품" 페이지에서 관리
   - 정산에서 제외됨
5. ✅ 알림: "N개 상품이 공급 중지되었습니다."

### 2) 엑셀 다운로드

**관리자**: 모든 등급 가격 포함
**회원**: 자신의 등급 가격만 포함

---

## 데이터 스키마 (current_products 테이블)

```typescript
{
  id: number;
  productCode: string;              // 상품코드 (unique)
  productName: string;              // 상품명
  categoryLarge: string | null;     // 대분류
  categoryMedium: string | null;    // 중분류
  categorySmall: string | null;     // 소분류
  weight: number;                   // 중량(수량) - 숫자, 소수점 1자리
  
  // 등급별 공급가
  startPrice: number;               // Start회원 공급가
  drivingPrice: number;             // Driving회원 공급가
  topPrice: number;                 // Top회원 공급가
  
  // 상태
  supplyStatus: 'supply' | 'scheduled';  // 공급 / 공급예정
  suspendedAt: Date | null;         // 공급중지일
  suspendReason: string | null;     // 공급중지 사유
  
  appliedAt: Date;                  // 현재 공급가 적용일
  
  createdAt: Date;
  updatedAt: Date;
}
```

---

# 5️⃣ 공급 중지 상품 페이지

## 페이지 목적

- 공급 중지 처리된 상품들 관리
- 필요시 "공급 재개"하여 다시 활성화

---

## 페이지 레이아웃

```
┌──────────────────────────────────────────────────────────────────────────┐
│ 공급 중지 상품                                                            │
│ 공급이 중지된 상품입니다. 공급 재개 시 다시 활성화됩니다.                    │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 검색 필터                                                               │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ 대분류: [전체▼] 중분류: [전체▼] 소분류: [전체▼] 중량: [____]           ││
│ │ 상품코드: [________] 상품명: [________]        [검색] [초기화]         ││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
├──────────────────────────────────────────────────────────────────────────┤
│ [선택 공급 재개] [선택 삭제]                                               │
├──────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│ ■ 상품 테이블 (UI 스타일 참조: 체크박스 고정, 선택 행 하이라이트, 스크롤)    │
│ ┌──────────────────────────────────────────────────────────────────────┐│
│ │ □ │대분류│중분류│소분류│중량 │상품코드│상품명  │중지일    │중지사유   │관리││
│ │ □ │과일 │포도 │거봉 │2.0 │C001  │거봉2kg │2025.01.15│시즌 종료 │[재개]││
│ │ □ │과일 │감  │단감 │5.0 │D001  │단감5kg │2025.01.18│품질 이슈 │[재개]││
│ └──────────────────────────────────────────────────────────────────────┘│
│                                                                          │
└──────────────────────────────────────────────────────────────────────────┘
```

---

## 테이블 컬럼 구조 (10개)

| 순번 | 컬럼명 | 최소 너비 | 설명 |
|------|--------|----------|------|
| 1 | **체크** | 40px | 선택용 체크박스 (고정) |
| 2 | **대분류** | 80px | 카테고리 |
| 3 | **중분류** | 80px | 카테고리 |
| 4 | **소분류** | 80px | 카테고리 |
| 5 | **중량(수량)** | 60px | 숫자, 소수점 1자리 |
| 6 | **상품코드** | 100px | 고유값 |
| 7 | **상품명** | 120px | 상품 이름 |
| 8 | **중지일** | 100px | 공급 중지된 날짜 |
| 9 | **중지사유** | 120px | 공급 중지 사유 |
| 10 | **관리** | 60px | [재개] 버튼 |

---

## 주요 기능

### 1) 공급 재개

**개별 재개**
- [재개] 버튼 클릭
- 확인 모달: "이 상품의 공급을 재개하시겠습니까?"
- 확인 시:
  - 상태 → 'supply' (공급)
  - "상품등록(공급가 계산)" 목록에 다시 표시
  - "현재 공급가 상품" 목록에 다시 표시
- ✅ 알림: "상품의 공급이 재개되었습니다."

**선택 재개**
- 체크박스로 여러 상품 선택
- [선택 공급 재개] 클릭
- 확인 모달: "선택한 N개 상품의 공급을 재개하시겠습니까?"
- ✅ 알림: "N개 상품의 공급이 재개되었습니다."

### 2) 선택 삭제

- 체크박스로 여러 상품 선택
- [선택 삭제] 클릭
- 확인 모달: "선택한 N개 상품을 완전히 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."
- 확인 시 DB에서 완전 삭제
- ✅ 알림: "N개 상품이 삭제되었습니다."

---

## 공급 재개 시 데이터 흐름

```
[공급 중지 상품] ──공급 재개──→ [상품등록(공급가 계산)]
                              ↓
                              [현재 공급가 상품] (상태: 공급)
```

---

# 🔌 API 엔드포인트 (2차)

```
# 차주 예상공급가 상품
GET    /api/next-week-products              # 목록 조회 (회원용: 등급별 가격 필터)
POST   /api/next-week-products/apply-current       # 선택 항목 현재 공급가 적용
POST   /api/next-week-products/apply-current-all   # 전체 현재 공급가 적용
POST   /api/next-week-products/check-new           # 신규 상품 확인 (적용 전)
GET    /api/next-week-products/download            # 엑셀 다운로드

# 현재 공급가 상품
GET    /api/current-products                # 목록 조회 (회원용: 등급별 가격 필터)
POST   /api/current-products/suspend        # 공급 중지
GET    /api/current-products/download       # 엑셀 다운로드

# 공급 중지 상품
GET    /api/suspended-products              # 목록 조회
POST   /api/suspended-products/resume       # 공급 재개
DELETE /api/suspended-products/:id          # 삭제
DELETE /api/suspended-products/bulk         # 선택 삭제
```

---

# 🎯 구현 체크리스트 (2차)

### UI 스타일 (공통)
- [ ] 테이블 가로/세로 스크롤 (15행 초과 시)
- [ ] 체크박스 컬럼 고정 (sticky)
- [ ] 선택 행 파란색 하이라이트
- [ ] 엑셀 스타일 셀 (테두리 없는 입력 필드)
- [ ] 컬럼별 최소 너비 설정

### 알림 시스템 (공통)
- [ ] 에러 알림 (빨간색) - 실패 시
- [ ] 정보 알림 (파란색) - 신규 상품 안내
- [ ] 성공 알림 (초록색) - 완료 시
- [ ] 확인 모달 - 중요 동작 전

### 차주 예상공급가 상품
- [ ] 관리자 페이지 (모든 등급 표시)
- [ ] 회원 페이지 (자신의 등급만 표시)
- [ ] 차주 적용 기간 자동 계산 및 표시
- [ ] 검색 필터 (대분류/중분류/소분류/중량/상품코드/상품명/공급상태)
- [ ] 선택 항목 현재 공급가 적용 + 알림
- [ ] 전체 현재 공급가 적용 + 알림
- [ ] 신규 상품 안내 알림
- [ ] 엑셀 다운로드 (관리자: 전체 / 회원: 자신의 등급)
- [ ] 다운로드 파일에 적용 기간 표시

### 현재 공급가 상품
- [ ] 관리자 페이지 (모든 등급 표시)
- [ ] 회원 페이지 (자신의 등급만 표시)
- [ ] 검색 필터
- [ ] 선택 공급중지 (사유 입력) + 알림
- [ ] 엑셀 다운로드

### 공급 중지 상품
- [ ] 검색 필터
- [ ] 공급 재개 (개별/선택) + 알림
- [ ] 선택 삭제 + 알림

---

# ⚠️ 중요 규칙 요약 (2차)

| 규칙 | 설명 |
|------|------|
| **UI 스타일** | 1차와 동일 (체크박스 고정, 행 하이라이트, 엑셀 스타일 셀, 스크롤) |
| **알림 필수** | 모든 주요 동작에 알림 표시 (에러/정보/성공) |
| **신규 상품 안내** | 적용 전 신규 상품 개수 안내 알림 |
| **회원 가격 표시** | 로그인한 등급에 맞는 가격만 자동 표시 |
| **준회원** | Start회원과 동일한 가격 적용 |
| **비로그인** | 가격 비공개 ("로그인 후 확인") |
| **중량(수량)** | 숫자만, 소수점 1자리까지 (예: 5.5) |
| **차주 적용 기간** | 다음 주 월요일 ~ 금요일 자동 계산 |
| **다운로드 파일** | 적용 기간 명확히 표시 |
| **공급상태** | "공급" / "공급예정" |
| **공급 재개** | 공급 중지 상품 → 상품등록 + 현재 공급가에 다시 표시 |
| **정산 기준** | 현재 공급가 상품의 가격으로 정산 |
